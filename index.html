<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Flappy Adventure</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            overflow-x: hidden;
        }
        
        canvas {
            border: 2px solid #000;
            display: block;
            margin: 0 auto;
        }
        
        .game-container {
            position: relative;
            width: 400px;
            height: 600px;
            margin: 0 auto;
        }
        
        .hidden {
            display: none;
        }
        
        .character-option {
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .character-option:hover {
            transform: scale(1.1);
        }
        
        .character-option.selected {
            border: 3px solid #FFD700;
            transform: scale(1.1);
        }
        
        .environment-option {
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .environment-option:hover {
            transform: scale(1.1);
        }
        
        .environment-option.selected {
            border: 3px solid #FFD700;
        }
        
        .power-up-icon {
            width: 30px;
            height: 30px;
            margin: 0 5px;
        }
        
        .difficulty-btn {
            transition: all 0.3s;
        }
        
        .difficulty-btn.selected {
            background-color: #3182ce;
            color: white;
        }
        
        /* Make sure everything fits nicely for PDF export */
        @media print {
            body {
                width: 100%;
                margin: 0;
                padding: 0;
            }
            
            .page-break {
                page-break-before: avoid;
            }
            
            .game-container {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body class="bg-gray-100 p-4">
    <div class="max-w-4xl mx-auto bg-white shadow-lg rounded-lg overflow-hidden p-6">
        <h1 class="text-4xl font-bold text-center text-blue-600 mb-4">Super Flappy Adventure</h1>
        
        <!-- Game Description -->
        <div class="mb-6 text-center">
            <p class="text-lg">An enhanced version of the classic Flappy Bird with power-ups, multiple characters, environments, and difficulty levels!</p>
        </div>
        
        <!-- Game Screens -->
        <div class="game-container">
            <!-- Main Menu Screen -->
            <div id="main-menu" class="absolute inset-0 bg-gradient-to-b from-blue-400 to-blue-600 flex flex-col items-center justify-center p-4">
                <h2 class="text-4xl font-bold text-white mb-8">Super Flappy Adventure</h2>
                <button id="start-btn" class="mb-4 bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
                    Start Game
                </button>
                <button id="customize-btn" class="mb-4 bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
                    Customize
                </button>
                <button id="instructions-btn" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
                    Instructions
                </button>
            </div>
            
            <!-- Game Canvas (initially hidden) -->
            <canvas id="game-canvas" width="400" height="600" class="hidden"></canvas>
            
            <!-- Game Over Screen (initially hidden) -->
            <div id="game-over" class="hidden absolute inset-0 bg-black bg-opacity-80 flex flex-col items-center justify-center p-4">
                <h2 class="text-4xl font-bold text-white mb-4">Game Over</h2>
                <p id="final-score" class="text-2xl text-white mb-6">Score: 0</p>
                <p id="high-score" class="text-xl text-yellow-400 mb-8">High Score: 0</p>
                <button id="restart-btn" class="mb-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Play Again
                </button>
                <button id="menu-btn" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Main Menu
                </button>
            </div>
            
            <!-- Customization Screen (initially hidden) -->
            <div id="customize-screen" class="hidden absolute inset-0 bg-gradient-to-b from-purple-400 to-purple-600 flex flex-col items-center justify-start p-4 overflow-y-auto">
                <h2 class="text-3xl font-bold text-white mb-4">Customize Your Game</h2>
                
                <!-- Character Selection -->
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-white mb-2">Choose Your Character</h3>
                    <div class="flex space-x-4">
                        <div class="character-option selected bg-white p-2 rounded-lg" data-character="classic">
                            <div class="w-16 h-16 bg-yellow-400 rounded-full flex items-center justify-center">
                                <i class="fas fa-kiwi-bird text-2xl"></i>
                            </div>
                            <p class="text-center mt-1">Classic</p>
                        </div>
                        <div class="character-option bg-white p-2 rounded-lg" data-character="ninja">
                            <div class="w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center">
                                <i class="fas fa-kiwi-bird text-2xl text-white"></i>
                            </div>
                            <p class="text-center mt-1">Ninja</p>
                        </div>
                        <div class="character-option bg-white p-2 rounded-lg" data-character="robot">
                            <div class="w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center">
                                <i class="fas fa-robot text-2xl text-white"></i>
                            </div>
                            <p class="text-center mt-1">Robot</p>
                        </div>
                        <div class="character-option bg-white p-2 rounded-lg" data-character="ghost">
                            <div class="w-16 h-16 bg-purple-300 rounded-full flex items-center justify-center">
                                <i class="fas fa-ghost text-2xl text-white"></i>
                            </div>
                            <p class="text-center mt-1">Ghost</p>
                        </div>
                    </div>
                </div>
                
                <!-- Environment Selection -->
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-white mb-2">Choose Environment</h3>
                    <div class="flex space-x-4">
                        <div class="environment-option selected bg-white p-2 rounded-lg" data-environment="day">
                            <div class="w-16 h-16 bg-blue-400 rounded-lg flex items-center justify-center">
                                <i class="fas fa-sun text-2xl text-yellow-400"></i>
                            </div>
                            <p class="text-center mt-1">Day</p>
                        </div>
                        <div class="environment-option bg-white p-2 rounded-lg" data-environment="night">
                            <div class="w-16 h-16 bg-gray-900 rounded-lg flex items-center justify-center">
                                <i class="fas fa-moon text-2xl text-yellow-200"></i>
                            </div>
                            <p class="text-center mt-1">Night</p>
                        </div>
                        <div class="environment-option bg-white p-2 rounded-lg" data-environment="forest">
                            <div class="w-16 h-16 bg-green-700 rounded-lg flex items-center justify-center">
                                <i class="fas fa-tree text-2xl text-green-400"></i>
                            </div>
                            <p class="text-center mt-1">Forest</p>
                        </div>
                        <div class="environment-option bg-white p-2 rounded-lg" data-environment="space">
                            <div class="w-16 h-16 bg-black rounded-lg flex items-center justify-center">
                                <i class="fas fa-star text-2xl text-white"></i>
                            </div>
                            <p class="text-center mt-1">Space</p>
                        </div>
                    </div>
                </div>
                
                <!-- Difficulty Selection -->
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-white mb-2">Difficulty Level</h3>
                    <div class="flex space-x-2">
                        <button class="difficulty-btn selected px-4 py-2 bg-blue-100 rounded-lg" data-difficulty="easy">Easy</button>
                        <button class="difficulty-btn px-4 py-2 bg-blue-100 rounded-lg" data-difficulty="medium">Medium</button>
                        <button class="difficulty-btn px-4 py-2 bg-blue-100 rounded-lg" data-difficulty="hard">Hard</button>
                        <button class="difficulty-btn px-4 py-2 bg-blue-100 rounded-lg" data-difficulty="extreme">Extreme</button>
                    </div>
                </div>
                
                <button id="back-to-menu" class="mt-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Back to Menu
                </button>
            </div>
            
            <!-- Instructions Screen (initially hidden) -->
            <div id="instructions-screen" class="hidden absolute inset-0 bg-gradient-to-b from-indigo-400 to-indigo-600 flex flex-col items-center justify-start p-4 overflow-y-auto">
                <h2 class="text-3xl font-bold text-white mb-4">How to Play</h2>
                
                <div class="bg-white rounded-lg p-4 w-full mb-4">
                    <h3 class="text-xl font-semibold text-indigo-600 mb-2">Basic Controls</h3>
                    <p class="mb-2"><strong>Click, Touch or Spacebar:</strong> Make the bird fly upward</p>
                    <p class="mb-2"><strong>P key:</strong> Pause the game</p>
                </div>
                
                <div class="bg-white rounded-lg p-4 w-full mb-4">
                    <h3 class="text-xl font-semibold text-indigo-600 mb-2">Power-ups</h3>
                    <div class="flex items-center mb-2">
                        <div class="power-up-icon bg-blue-200 rounded-full flex items-center justify-center mr-2">
                            <i class="fas fa-shield-alt text-blue-600"></i>
                        </div>
                        <p><strong>Shield:</strong> Protects from one collision</p>
                    </div>
                    <div class="flex items-center mb-2">
                        <div class="power-up-icon bg-yellow-200 rounded-full flex items-center justify-center mr-2">
                            <i class="fas fa-bolt text-yellow-600"></i>
                        </div>
                        <p><strong>Slow Motion:</strong> Slows down game speed for 5 seconds</p>
                    </div>
                    <div class="flex items-center">
                        <div class="power-up-icon bg-green-200 rounded-full flex items-center justify-center mr-2">
                            <i class="fas fa-times text-green-600"></i>
                        </div>
                        <p><strong>Multiplier:</strong> Doubles your points for 10 seconds</p>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg p-4 w-full mb-4">
                    <h3 class="text-xl font-semibold text-indigo-600 mb-2">Special Characters</h3>
                    <p class="mb-1"><strong>Classic Bird:</strong> Balanced character</p>
                    <p class="mb-1"><strong>Ninja Bird:</strong> Smaller hitbox but faster falling</p>
                    <p class="mb-1"><strong>Robot Bird:</strong> Heavier but can break through one pipe</p>
                    <p><strong>Ghost Bird:</strong> Can occasionally phase through pipes</p>
                </div>
                
                <button id="back-from-instructions" class="mt-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Back to Menu
                </button>
            </div>
            
            <!-- Pause Screen (initially hidden) -->
            <div id="pause-screen" class="hidden absolute inset-0 bg-black bg-opacity-50 flex flex-col items-center justify-center p-4">
                <h2 class="text-4xl font-bold text-white mb-8">Game Paused</h2>
                <button id="resume-btn" class="mb-4 bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Resume
                </button>
                <button id="quit-btn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Quit
                </button>
            </div>
        </div>
        
        <!-- Game Features -->
        <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-blue-100 p-4 rounded-lg">
                <h3 class="text-xl font-bold text-blue-800 mb-2">Multiple Characters</h3>
                <p>Choose from four unique birds, each with special abilities and characteristics!</p>
                <ul class="list-disc ml-5 mt-2">
                    <li>Classic Bird - Balanced character</li>
                    <li>Ninja Bird - Smaller hitbox but faster falling</li>
                    <li>Robot Bird - Heavier but can break through one pipe</li>
                    <li>Ghost Bird - Can occasionally phase through pipes</li>
                </ul>
            </div>
            
            <div class="bg-green-100 p-4 rounded-lg">
                <h3 class="text-xl font-bold text-green-800 mb-2">Power-ups System</h3>
                <p>Collect special items to gain advantages:</p>
                <ul class="list-disc ml-5 mt-2">
                    <li>Shield - Protects from one collision</li>
                    <li>Slow Motion - Slows down game speed</li>
                    <li>Score Multiplier - Doubles your points</li>
                    <li>Mini Bird - Shrinks your character temporarily</li>
                </ul>
            </div>
            
            <div class="bg-purple-100 p-4 rounded-lg">
                <h3 class="text-xl font-bold text-purple-800 mb-2">Multiple Environments</h3>
                <p>Play through different worlds with unique visuals and challenges:</p>
                <ul class="list-disc ml-5 mt-2">
                    <li>Day - Classic sunny environment</li>
                    <li>Night - Darker setting with glowing obstacles</li>
                    <li>Forest - Navigate through tree branches instead of pipes</li>
                    <li>Space - Low gravity environment with asteroid obstacles</li>
                </ul>
            </div>
            
            <div class="bg-yellow-100 p-4 rounded-lg">
                <h3 class="text-xl font-bold text-yellow-800 mb-2">Difficulty Levels</h3>
                <p>Challenge yourself with progressively harder gameplay:</p>
                <ul class="list-disc ml-5 mt-2">
                    <li>Easy - Wider gaps, slower speed</li>
                    <li>Medium - Standard gameplay</li>
                    <li>Hard - Faster speed, narrower gaps</li>
                    <li>Extreme - Maximum speed with moving obstacles</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Game Variables
        let canvas, ctx;
        let gameState = 'menu'; // menu, playing, paused, gameOver
        let score = 0;
        let highScore = 0;
        let gameSpeed = 2;
        let gravity = 0.5;
        let jumping = false;
        
        // Character settings
        let selectedCharacter = 'classic';
        let selectedEnvironment = 'day';
        let selectedDifficulty = 'easy';
        
        // Bird object
        const bird = {
            x: 50,
            y: 300,
            width: 40,
            height: 30,
            velocity: 0,
            jumpStrength: -10,
            
            // Character-specific properties
            characterProps: {
                classic: { width: 40, height: 30, color: '#FFD700', gravity: 0.5, jumpStrength: -10 },
                ninja: { width: 35, height: 25, color: '#333333', gravity: 0.6, jumpStrength: -10.5 },
                robot: { width: 45, height: 35, color: '#3498db', gravity: 0.7, jumpStrength: -11 },
                ghost: { width: 40, height: 30, color: '#9b59b6', gravity: 0.4, jumpStrength: -9.5 }
            },
            
            // Method to update bird properties based on selected character
            updateCharacter: function() {
                const props = this.characterProps[selectedCharacter];
                this.width = props.width;
                this.height = props.height;
                this.color = props.color;
                gravity = props.gravity;
                this.jumpStrength = props.jumpStrength;
                
                // Adjust difficulty
                switch(selectedDifficulty) {
                    case 'easy':
                        gameSpeed = 2;
                        gravity *= 0.9;
                        break;
                    case 'medium':
                        gameSpeed = 3;
                        // Default gravity
                        break;
                    case 'hard':
                        gameSpeed = 4;
                        gravity *= 1.1;
                        break;
                    case 'extreme':
                        gameSpeed = 5;
                        gravity *= 1.2;
                        break;
                }
            },
            
            // Draw the bird
            draw: function() {
                ctx.fillStyle = this.color;
                
                // Basic bird shape
                ctx.beginPath();
                ctx.ellipse(this.x, this.y, this.width/2, this.height/2, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // Add eye
                ctx.fillStyle = '#fff';
                ctx.beginPath();
                ctx.ellipse(this.x + this.width/4, this.y - this.height/6, this.width/8, this.height/8, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // Add pupil
                ctx.fillStyle = '#000';
                ctx.beginPath();
                ctx.ellipse(this.x + this.width/4, this.y - this.height/6, this.width/16, this.height/16, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // Add beak
                ctx.fillStyle = '#FF6B00';
                ctx.beginPath();
                ctx.moveTo(this.x + this.width/2, this.y);
                

// Core gameplay functions
function birdJump() {
    // Different jump force based on environment and character
    let jumpForce = config.jumpForce;
    
    // Space environment has lower gravity effect on jumps
    if (config.environment === 'space') {
        jumpForce *= 0.8;
    }
    
    // Robot bird has heavier jumps
    if (config.character === 'robot') {
        jumpForce *= 1.2;
    }
    
    bird.velocityY = jumpForce;
}

function updateBird() {
    // Apply gravity
    let gravityValue = config.gravity;
    
    // Modify gravity based on environment
    if (config.environment === 'space') {
        gravityValue *= 0.7; // Lower gravity in space
    }
    
    // Modify falling speed based on character
    if (config.character === 'ninja') {
        gravityValue *= bird.ninjaFallingMultiplier;
    } else if (config.character === 'robot') {
        gravityValue *= 1.2; // Robot bird is heavier
    }
    
    // Apply slow motion if active
    if (config.activeSlowMotion) {
        gravityValue *= 0.5;
    }
    
    // Update vertical velocity
    bird.velocityY += gravityValue;
    
    // Update position
    bird.y += bird.velocityY;
    
    // Apply mini size power-up
    if (config.activeMiniSize) {
        bird.width = bird.originalWidth * 0.7;
        bird.height = bird.originalHeight * 0.7;
    } else {
        bird.width = bird.originalWidth;
        bird.height = bird.originalHeight;
    }
    
    // Animate bird
    if (config.frameCount % bird.animationSpeed === 0) {
        bird.frameX = (bird.frameX + 1) % bird.maxFrame;
    }
    
    // Check for collision with bounds
    if (bird.y + bird.height > config.height) {
        gameOver();
    } else if (bird.y < 0) {
        bird.y = 0;
        bird.velocityY = 0;
    }
}

function spawnPipe() {
    if (config.frameCount % config.pipeSpawnRate === 0) {
        // Calculate random gap position
        const gapPosition = Math.floor(Math.random() * (config.height - config.pipeGap - 100)) + 50;
        
        // Create top pipe
        const topPipe = {
            x: config.width,
            y: 0,
            width: config.pipeWidth,
            height: gapPosition,
            passed: false,
            moving: config.difficulty === 'extreme' // Moving pipes in extreme mode
        };
        
        // Create bottom pipe
        const bottomPipe =
Copy
Ask anything, create anything
Preview
Code
Thinking
Copy<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Flappy Adventure</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            overflow-x: hidden;
        }
        
        canvas {
            border: 2px solid #000;
            display: block;
            margin: 0 auto;
        }
        
        .game-container {
            position: relative;
            width: 400px;
            height: 600px;
            margin: 0 auto;
        }
        
        .hidden {
            display: none;
        }
        
        .character-option {
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .character-option:hover {
            transform: scale(1.1);
        }
        
        .character-option.selected {
            border: 3px solid #FFD700;
            transform: scale(1.1);
        }
        
        .environment-option {
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .environment-option:hover {
            transform: scale(1.1);
        }
        
        .environment-option.selected {
            border: 3px solid #FFD700;
        }
        
        .power-up-icon {
            width: 30px;
            height: 30px;
            margin: 0 5px;
        }
        
        .difficulty-btn {
            transition: all 0.3s;
        }
        
        .difficulty-btn.selected {
            background-color: #3182ce;
            color: white;
        }
        
        /* Make sure everything fits nicely for PDF export */
        @media print {
            body {
                width: 100%;
                margin: 0;
                padding: 0;
            }
            
            .page-break {
                page-break-before: avoid;
            }
            
            .game-container {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body class="bg-gray-100 p-4">
    <div class="max-w-4xl mx-auto bg-white shadow-lg rounded-lg overflow-hidden p-6">
        <h1 class="text-4xl font-bold text-center text-blue-600 mb-4">Super Flappy Adventure</h1>
        
        <!-- Game Description -->
        <div class="mb-6 text-center">
            <p class="text-lg">An enhanced version of the classic Flappy Bird with power-ups, multiple characters, environments, and difficulty levels!</p>
        </div>
        
        <!-- Game Screens -->
        <div class="game-container">
            <!-- Main Menu Screen -->
            <div id="main-menu" class="absolute inset-0 bg-gradient-to-b from-blue-400 to-blue-600 flex flex-col items-center justify-center p-4">
                <h2 class="text-4xl font-bold text-white mb-8">Super Flappy Adventure</h2>
                <button id="start-btn" class="mb-4 bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
                    Start Game
                </button>
                <button id="customize-btn" class="mb-4 bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
                    Customize
                </button>
                <button id="instructions-btn" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
                    Instructions
                </button>
            </div>
            
            <!-- Game Canvas (initially hidden) -->
            <canvas id="game-canvas" width="400" height="600" class="hidden"></canvas>
            
            <!-- Game Over Screen (initially hidden) -->
            <div id="game-over" class="hidden absolute inset-0 bg-black bg-opacity-80 flex flex-col items-center justify-center p-4">
                <h2 class="text-4xl font-bold text-white mb-4">Game Over</h2>
                <p id="final-score" class="text-2xl text-white mb-6">Score: 0</p>
                <p id="high-score" class="text-xl text-yellow-400 mb-8">High Score: 0</p>
                <button id="restart-btn" class="mb-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Play Again
                </button>
                <button id="menu-btn" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Main Menu
                </button>
            </div>
            
            <!-- Customization Screen (initially hidden) -->
            <div id="customize-screen" class="hidden absolute inset-0 bg-gradient-to-b from-purple-400 to-purple-600 flex flex-col items-center justify-start p-4 overflow-y-auto">
                <h2 class="text-3xl font-bold text-white mb-4">Customize Your Game</h2>
                
                <!-- Character Selection -->
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-white mb-2">Choose Your Character</h3>
                    <div class="flex space-x-4">
                        <div class="character-option selected bg-white p-2 rounded-lg" data-character="classic">
                            <div class="w-16 h-16 bg-yellow-400 rounded-full flex items-center justify-center">
                                <i class="fas fa-kiwi-bird text-2xl"></i>
                            </div>
                            <p class="text-center mt-1">Classic</p>
                        </div>
                        <div class="character-option bg-white p-2 rounded-lg" data-character="ninja">
                            <div class="w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center">
                                <i class="fas fa-kiwi-bird text-2xl text-white"></i>
                            </div>
                            <p class="text-center mt-1">Ninja</p>
                        </div>
                        <div class="character-option bg-white p-2 rounded-lg" data-character="robot">
                            <div class="w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center">
                                <i class="fas fa-robot text-2xl text-white"></i>
                            </div>
                            <p class="text-center mt-1">Robot</p>
                        </div>
                        <div class="character-option bg-white p-2 rounded-lg" data-character="ghost">
                            <div class="w-16 h-16 bg-purple-300 rounded-full flex items-center justify-center">
                                <i class="fas fa-ghost text-2xl text-white"></i>
                            </div>
                            <p class="text-center mt-1">Ghost</p>
                        </div>
                    </div>
                </div>
                
                <!-- Environment Selection -->
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-white mb-2">Choose Environment</h3>
                    <div class="flex space-x-4">
                        <div class="environment-option selected bg-white p-2 rounded-lg" data-environment="day">
                            <div class="w-16 h-16 bg-blue-400 rounded-lg flex items-center justify-center">
                                <i class="fas fa-sun text-2xl text-yellow-400"></i>
                            </div>
                            <p class="text-center mt-1">Day</p>
                        </div>
                        <div class="environment-option bg-white p-2 rounded-lg" data-environment="night">
                            <div class="w-16 h-16 bg-gray-900 rounded-lg flex items-center justify-center">
                                <i class="fas fa-moon text-2xl text-yellow-200"></i>
                            </div>
                            <p class="text-center mt-1">Night</p>
                        </div>
                        <div class="environment-option bg-white p-2 rounded-lg" data-environment="forest">
                            <div class="w-16 h-16 bg-green-700 rounded-lg flex items-center justify-center">
                                <i class="fas fa-tree text-2xl text-green-400"></i>
                            </div>
                            <p class="text-center mt-1">Forest</p>
                        </div>
                        <div class="environment-option bg-white p-2 rounded-lg" data-environment="space">
                            <div class="w-16 h-16 bg-black rounded-lg flex items-center justify-center">
                                <i class="fas fa-star text-2xl text-white"></i>
                            </div>
                            <p class="text-center mt-1">Space</p>
                        </div>
                    </div>
                </div>
                
                <!-- Difficulty Selection -->
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-white mb-2">Difficulty Level</h3>
                    <div class="flex space-x-2">
                        <button class="difficulty-btn selected px-4 py-2 bg-blue-100 rounded-lg" data-difficulty="easy">Easy</button>
                        <button class="difficulty-btn px-4 py-2 bg-blue-100 rounded-lg" data-difficulty="medium">Medium</button>
                        <button class="difficulty-btn px-4 py-2 bg-blue-100 rounded-lg" data-difficulty="hard">Hard</button>
                        <button class="difficulty-btn px-4 py-2 bg-blue-100 rounded-lg" data-difficulty="extreme">Extreme</button>
                    </div>
                </div>
                
                <button id="back-to-menu" class="mt-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Back to Menu
                </button>
            </div>
            
            <!-- Instructions Screen (initially hidden) -->
            <div id="instructions-screen" class="hidden absolute inset-0 bg-gradient-to-b from-indigo-400 to-indigo-600 flex flex-col items-center justify-start p-4 overflow-y-auto">
                <h2 class="text-3xl font-bold text-white mb-4">How to Play</h2>
                
                <div class="bg-white rounded-lg p-4 w-full mb-4">
                    <h3 class="text-xl font-semibold text-indigo-600 mb-2">Basic Controls</h3>
                    <p class="mb-2"><strong>Click, Touch or Spacebar:</strong> Make the bird fly upward</p>
                    <p class="mb-2"><strong>P key:</strong> Pause the game</p>
                </div>
                
                <div class="bg-white rounded-lg p-4 w-full mb-4">
                    <h3 class="text-xl font-semibold text-indigo-600 mb-2">Power-ups</h3>
                    <div class="flex items-center mb-2">
                        <div class="power-up-icon bg-blue-200 rounded-full flex items-center justify-center mr-2">
                            <i class="fas fa-shield-alt text-blue-600"></i>
                        </div>
                        <p><strong>Shield:</strong> Protects from one collision</p>
                    </div>
                    <div class="flex items-center mb-2">
                        <div class="power-up-icon bg-yellow-200 rounded-full flex items-center justify-center mr-2">
                            <i class="fas fa-bolt text-yellow-600"></i>
                        </div>
                        <p><strong>Slow Motion:</strong> Slows down game speed for 5 seconds</p>
                    </div>
                    <div class="flex items-center">
                        <div class="power-up-icon bg-green-200 rounded-full flex items-center justify-center mr-2">
                            <i class="fas fa-times text-green-600"></i>
                        </div>
                        <p><strong>Multiplier:</strong> Doubles your points for 10 seconds</p>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg p-4 w-full mb-4">
                    <h3 class="text-xl font-semibold text-indigo-600 mb-2">Special Characters</h3>
                    <p class="mb-1"><strong>Classic Bird:</strong> Balanced character</p>
                    <p class="mb-1"><strong>Ninja Bird:</strong> Smaller hitbox but faster falling</p>
                    <p class="mb-1"><strong>Robot Bird:</strong> Heavier but can break through one pipe</p>
                    <p><strong>Ghost Bird:</strong> Can occasionally phase through pipes</p>
                </div>
                
                <button id="back-from-instructions" class="mt-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Back to Menu
                </button>
            </div>
            
            <!-- Pause Screen (initially hidden) -->
            <div id="pause-screen" class="hidden absolute inset-0 bg-black bg-opacity-50 flex flex-col items-center justify-center p-4">
                <h2 class="text-4xl font-bold text-white mb-8">Game Paused</h2>
                <button id="resume-btn" class="mb-4 bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Resume
                </button>
                <button id="quit-btn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Quit
                </button>
            </div>
        </div>
        
        <!-- Game Features -->
        <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-blue-100 p-4 rounded-lg">
                <h3 class="text-xl font-bold text-blue-800 mb-2">Multiple Characters</h3>
                <p>Choose from four unique birds, each with special abilities and characteristics!</p>
                <ul class="list-disc ml-5 mt-2">
                    <li>Classic Bird - Balanced character</li>
                    <li>Ninja Bird - Smaller hitbox but faster falling</li>
                    <li>Robot Bird - Heavier but can break through one pipe</li>
                    <li>Ghost Bird - Can occasionally phase through pipes</li>
                </ul>
            </div>
            
            <div class="bg-green-100 p-4 rounded-lg">
                <h3 class="text-xl font-bold text-green-800 mb-2">Power-ups System</h3>
                <p>Collect special items to gain advantages:</p>
                <ul class="list-disc ml-5 mt-2">
                    <li>Shield - Protects from one collision</li>
                    <li>Slow Motion - Slows down game speed</li>
                    <li>Score Multiplier - Doubles your points</li>
                    <li>Mini Bird - Shrinks your character temporarily</li>
                </ul>
            </div>
            
            <div class="bg-purple-100 p-4 rounded-lg">
                <h3 class="text-xl font-bold text-purple-800 mb-2">Multiple Environments</h3>
                <p>Play through different worlds with unique visuals and challenges:</p>
                <ul class="list-disc ml-5 mt-2">
                    <li>Day - Classic sunny environment</li>
                    <li>Night - Darker setting with glowing obstacles</li>
                    <li>Forest - Navigate through tree branches instead of pipes</li>
                    <li>Space - Low gravity environment with asteroid obstacles</li>
                </ul>
            </div>
            
            <div class="bg-yellow-100 p-4 rounded-lg">
                <h3 class="text-xl font-bold text-yellow-800 mb-2">Difficulty Levels</h3>
                <p>Challenge yourself with progressively harder gameplay:</p>
                <ul class="list-disc ml-5 mt-2">
                    <li>Easy - Wider gaps, slower speed</li>
                    <li>Medium - Standard gameplay</li>
                    <li>Hard - Faster speed, narrower gaps</li>
                    <li>Extreme - Maximum speed with moving obstacles</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Game Variables
        let canvas, ctx;
        let gameState = 'menu'; // menu, playing, paused, gameOver
        let score = 0;
        let highScore = 0;
        let gameSpeed = 2;
        let gravity = 0.5;
        let jumping = false;
        
        // Character settings
        let selectedCharacter = 'classic';
        let selectedEnvironment = 'day';
        let selectedDifficulty = 'easy';
        
        // Bird object
        const bird = {
            x: 50,
            y: 300,
            width: 40,
            height: 30,
            velocity: 0,
            jumpStrength: -10,
            
            // Character-specific properties
            characterProps: {
                classic: { width: 40, height: 30, color: '#FFD700', gravity: 0.5, jumpStrength: -10 },
                ninja: { width: 35, height: 25, color: '#333333', gravity: 0.6, jumpStrength: -10.5 },
                robot: { width: 45, height: 35, color: '#3498db', gravity: 0.7, jumpStrength: -11 },
                ghost: { width: 40, height: 30, color: '#9b59b6', gravity: 0.4, jumpStrength: -9.5 }
            },
            
            // Method to update bird properties based on selected character
            updateCharacter: function() {
                const props = this.characterProps[selectedCharacter];
                this.width = props.width;
                this.height = props.height;
                this.color = props.color;
                gravity = props.gravity;
                this.jumpStrength = props.jumpStrength;
                
                // Adjust difficulty
                switch(selectedDifficulty) {
                    case 'easy':
                        gameSpeed = 2;
                        gravity *= 0.9;
                        break;
                    case 'medium':
                        gameSpeed = 3;
                        // Default gravity
                        break;
                    case 'hard':
                        gameSpeed = 4;
                        gravity *= 1.1;
                        break;
                    case 'extreme':
                        gameSpeed = 5;
                        gravity *= 1.2;
                        break;
                }
            },
            
            // Draw the bird
            draw: function() {
                ctx.fillStyle = this.color;
                
                // Basic bird shape
                ctx.beginPath();
                ctx.ellipse(this.x, this.y, this.width/2, this.height/2, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // Add eye
                ctx.fillStyle = '#fff';
                ctx.beginPath();
                ctx.ellipse(this.x + this.width/4, this.y - this.height/6, this.width/8, this.height/8, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // Add pupil
                ctx.fillStyle = '#000';
                ctx.beginPath();
                ctx.ellipse(this.x + this.width/4, this.y - this.height/6, this.width/16, this.height/16, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // Add beak
                ctx.fillStyle = '#FF6B00';
                ctx.beginPath();
                ctx.moveTo(this.x + this.width/2, this.y);
                ctx.lineTo(this.x + this.width/2 + 15, this.y - 5);
                ctx.lineTo(this.x + this.width/2 + 15, this.y + 5);
                ctx.closePath();
                ctx.fill();
                
                // Character-specific details
                switch(selectedCharacter) {
                    case 'ninja':
                        // Ninja headband
                        ctx.fillStyle = '#c0392b';
                        ctx.fillRect(this.x - this.width/2, this.y - this.height/3, this.width, this.height/6);
                        break;
                    case 'robot':
                        // Robot antenna
                        ctx.fillStyle = '#7f8c8d';
                        ctx.fillRect(this.x, this.y - this.height/2 - 10, 2, 10);
                        ctx.beginPath();
                        ctx.arc(this.x + 1, this.y - this.height/2 - 10, 3, 0, Math.PI * 2);
                        ctx.fill();
                        break;
                    case 'ghost':
                        // Ghost transparency
                        ctx.globalAlpha = 0.7;
                        // Reset alpha
                        ctx.globalAlpha = 1;
                        break;
                }
            },
            
            // Update bird position
            update: function() {
                this.velocity += gravity;
                this.y += this.velocity;
                
                // Ground collision
                if (this.y + this.height/2 > canvas.height) {
                    this.y = canvas.height - this.height/2;
                    this.velocity = 0;
                    gameOver();
                }
                
                // Ceiling collision
                if (this.y - this.height/2 < 0) {
                    this.y = this.height/2;
                    this.velocity = 1;
                }
            },
            
            // Make the bird jump
            jump: function() {
                this.velocity = this.jumpStrength;
                jumping = true;
                setTimeout(() => { jumping = false; }, 200);
            },
            
            // Reset bird position
            reset: function() {
                this.x = 50;
                this.y = 300;
                this.velocity = 0;
            }
        };
        
        // Pipes array
        let pipes = [];
        const pipeWidth = 60;
        let pipeGap = 150; // Gap between top and bottom pipes
        let pipeSpacing = 220; // Distance between pipe pairs
        let timeSinceLastPipe = 0;
        
        // Power-ups
        let powerUps = [];
        let activePowerUps = {
            shield: false,
            slowMotion: false,
            multiplier: false,
            mini: false
        };
        let powerUpTimers = {
            shield: 0,
            slowMotion: 0,
            multiplier: 0,
            mini: 0
        };
            config.activeShield = false;
    config.activeSlowMotion = false;
    config.activeMultiplier = false;
    config.activeMiniSize = false;
    config.slowMotionTimer = 0;
    config.multiplierTimer = 0;
    config.miniSizeTimer = 0;
    
    // Clear arrays
    pipes.length = 0;
    powerUps.length = 0;
    
    // Hide all screens
    hideAllScreens();
}

// Core gameplay functions
function birdJump() {
    // Different jump force based on environment and character
    let jumpForce = config.jumpForce;
    
    // Space environment has lower gravity effect on jumps
    if (config.environment === 'space') {
        jumpForce *= 0.8;
    }
    
    // Robot bird has heavier jumps
    if (config.character === 'robot') {
        jumpForce *= 1.2;
    }
    
    bird.velocityY = jumpForce;
}

function updateBird() {
    // Apply gravity
    let gravityValue = config.gravity;
    
    // Modify gravity based on environment
    if (config.environment === 'space') {
        gravityValue *= 0.7; // Lower gravity in space
    }
    
    // Modify falling speed based on character
    if (config.character === 'ninja') {
        gravityValue *= bird.ninjaFallingMultiplier;
    } else if (config.character === 'robot') {
        gravityValue *= 1.2; // Robot bird is heavier
    }
    
    // Apply slow motion if active
    if (config.activeSlowMotion) {
        gravityValue *= 0.5;
    }
    
    // Update vertical velocity
    bird.velocityY += gravityValue;
    
    // Update position
    bird.y += bird.velocityY;
    
    // Apply mini size power-up
    if (config.activeMiniSize) {
        bird.width = bird.originalWidth * 0.7;
        bird.height = bird.originalHeight * 0.7;
    } else {
        bird.width = bird.originalWidth;
        bird.height = bird.originalHeight;
    }
    
    // Animate bird
    if (config.frameCount % bird.animationSpeed === 0) {
        bird.frameX = (bird.frameX + 1) % bird.maxFrame;
    }
    
    // Check for collision with bounds
    if (bird.y + bird.height > config.height) {
        gameOver();
    } else if (bird.y < 0) {
        bird.y = 0;
        bird.velocityY = 0;
    }
}

function spawnPipe() {
    if (config.frameCount % config.pipeSpawnRate === 0) {
        // Calculate random gap position
        const gapPosition = Math.floor(Math.random() * (config.height - config.pipeGap - 100)) + 50;
        
        // Create top pipe
        const topPipe = {
            x: config.width,
            y: 0,
            width: config.pipeWidth,
            height: gapPosition,
            passed: false,
            moving: config.difficulty === 'extreme' // Moving pipes in extreme mode
        };
        
        // Create bottom pipe
        const bottomPipe =
Copy
Ask anything, create anything
Preview
Code
Thinking
Copy<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Flappy Adventure</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            overflow-x: hidden;
        }
        
        canvas {
            border: 2px solid #000;
            display: block;
            margin: 0 auto;
        }
        
        .game-container {
            position: relative;
            width: 400px;
            height: 600px;
            margin: 0 auto;
        }
        
        .hidden {
            display: none;
        }
        
        .character-option {
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .character-option:hover {
            transform: scale(1.1);
        }
        
        .character-option.selected {
            border: 3px solid #FFD700;
            transform: scale(1.1);
        }
        
        .environment-option {
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .environment-option:hover {
            transform: scale(1.1);
        }
        
        .environment-option.selected {
            border: 3px solid #FFD700;
        }
        
        .power-up-icon {
            width: 30px;
            height: 30px;
            margin: 0 5px;
        }
        
        .difficulty-btn {
            transition: all 0.3s;
        }
        
        .difficulty-btn.selected {
            background-color: #3182ce;
            color: white;
        }
        
        /* Make sure everything fits nicely for PDF export */
        @media print {
            body {
                width: 100%;
                margin: 0;
                padding: 0;
            }
            
            .page-break {
                page-break-before: avoid;
            }
            
            .game-container {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body class="bg-gray-100 p-4">
    <div class="max-w-4xl mx-auto bg-white shadow-lg rounded-lg overflow-hidden p-6">
        <h1 class="text-4xl font-bold text-center text-blue-600 mb-4">Super Flappy Adventure</h1>
        
        <!-- Game Description -->
        <div class="mb-6 text-center">
            <p class="text-lg">An enhanced version of the classic Flappy Bird with power-ups, multiple characters, environments, and difficulty levels!</p>
        </div>
        
        <!-- Game Screens -->
        <div class="game-container">
            <!-- Main Menu Screen -->
            <div id="main-menu" class="absolute inset-0 bg-gradient-to-b from-blue-400 to-blue-600 flex flex-col items-center justify-center p-4">
                <h2 class="text-4xl font-bold text-white mb-8">Super Flappy Adventure</h2>
                <button id="start-btn" class="mb-4 bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
                    Start Game
                </button>
                <button id="customize-btn" class="mb-4 bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
                    Customize
                </button>
                <button id="instructions-btn" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
                    Instructions
                </button>
            </div>
            
            <!-- Game Canvas (initially hidden) -->
            <canvas id="game-canvas" width="400" height="600" class="hidden"></canvas>
            
            <!-- Game Over Screen (initially hidden) -->
            <div id="game-over" class="hidden absolute inset-0 bg-black bg-opacity-80 flex flex-col items-center justify-center p-4">
                <h2 class="text-4xl font-bold text-white mb-4">Game Over</h2>
                <p id="final-score" class="text-2xl text-white mb-6">Score: 0</p>
                <p id="high-score" class="text-xl text-yellow-400 mb-8">High Score: 0</p>
                <button id="restart-btn" class="mb-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Play Again
                </button>
                <button id="menu-btn" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Main Menu
                </button>
            </div>
            
            <!-- Customization Screen (initially hidden) -->
            <div id="customize-screen" class="hidden absolute inset-0 bg-gradient-to-b from-purple-400 to-purple-600 flex flex-col items-center justify-start p-4 overflow-y-auto">
                <h2 class="text-3xl font-bold text-white mb-4">Customize Your Game</h2>
                
                <!-- Character Selection -->
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-white mb-2">Choose Your Character</h3>
                    <div class="flex space-x-4">
                        <div class="character-option selected bg-white p-2 rounded-lg" data-character="classic">
                            <div class="w-16 h-16 bg-yellow-400 rounded-full flex items-center justify-center">
                                <i class="fas fa-kiwi-bird text-2xl"></i>
                            </div>
                            <p class="text-center mt-1">Classic</p>
                        </div>
                        <div class="character-option bg-white p-2 rounded-lg" data-character="ninja">
                            <div class="w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center">
                                <i class="fas fa-kiwi-bird text-2xl text-white"></i>
                            </div>
                            <p class="text-center mt-1">Ninja</p>
                        </div>
                        <div class="character-option bg-white p-2 rounded-lg" data-character="robot">
                            <div class="w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center">
                                <i class="fas fa-robot text-2xl text-white"></i>
                            </div>
                            <p class="text-center mt-1">Robot</p>
                        </div>
                        <div class="character-option bg-white p-2 rounded-lg" data-character="ghost">
                            <div class="w-16 h-16 bg-purple-300 rounded-full flex items-center justify-center">
                                <i class="fas fa-ghost text-2xl text-white"></i>
                            </div>
                            <p class="text-center mt-1">Ghost</p>
                        </div>
                    </div>
                </div>
                
                <!-- Environment Selection -->
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-white mb-2">Choose Environment</h3>
                    <div class="flex space-x-4">
                        <div class="environment-option selected bg-white p-2 rounded-lg" data-environment="day">
                            <div class="w-16 h-16 bg-blue-400 rounded-lg flex items-center justify-center">
                                <i class="fas fa-sun text-2xl text-yellow-400"></i>
                            </div>
                            <p class="text-center mt-1">Day</p>
                        </div>
                        <div class="environment-option bg-white p-2 rounded-lg" data-environment="night">
                            <div class="w-16 h-16 bg-gray-900 rounded-lg flex items-center justify-center">
                                <i class="fas fa-moon text-2xl text-yellow-200"></i>
                            </div>
                            <p class="text-center mt-1">Night</p>
                        </div>
                        <div class="environment-option bg-white p-2 rounded-lg" data-environment="forest">
                            <div class="w-16 h-16 bg-green-700 rounded-lg flex items-center justify-center">
                                <i class="fas fa-tree text-2xl text-green-400"></i>
                            </div>
                            <p class="text-center mt-1">Forest</p>
                        </div>
                        <div class="environment-option bg-white p-2 rounded-lg" data-environment="space">
                            <div class="w-16 h-16 bg-black rounded-lg flex items-center justify-center">
                                <i class="fas fa-star text-2xl text-white"></i>
                            </div>
                            <p class="text-center mt-1">Space</p>
                        </div>
                    </div>
                </div>
                
                <!-- Difficulty Selection -->
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-white mb-2">Difficulty Level</h3>
                    <div class="flex space-x-2">
                        <button class="difficulty-btn selected px-4 py-2 bg-blue-100 rounded-lg" data-difficulty="easy">Easy</button>
                        <button class="difficulty-btn px-4 py-2 bg-blue-100 rounded-lg" data-difficulty="medium">Medium</button>
                        <button class="difficulty-btn px-4 py-2 bg-blue-100 rounded-lg" data-difficulty="hard">Hard</button>
                        <button class="difficulty-btn px-4 py-2 bg-blue-100 rounded-lg" data-difficulty="extreme">Extreme</button>
                    </div>
                </div>
                
                <button id="back-to-menu" class="mt-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Back to Menu
                </button>
            </div>
            
            <!-- Instructions Screen (initially hidden) -->
            <div id="instructions-screen" class="hidden absolute inset-0 bg-gradient-to-b from-indigo-400 to-indigo-600 flex flex-col items-center justify-start p-4 overflow-y-auto">
                <h2 class="text-3xl font-bold text-white mb-4">How to Play</h2>
                
                <div class="bg-white rounded-lg p-4 w-full mb-4">
                    <h3 class="text-xl font-semibold text-indigo-600 mb-2">Basic Controls</h3>
                    <p class="mb-2"><strong>Click, Touch or Spacebar:</strong> Make the bird fly upward</p>
                    <p class="mb-2"><strong>P key:</strong> Pause the game</p>
                </div>
                
                <div class="bg-white rounded-lg p-4 w-full mb-4">
                    <h3 class="text-xl font-semibold text-indigo-600 mb-2">Power-ups</h3>
                    <div class="flex items-center mb-2">
                        <div class="power-up-icon bg-blue-200 rounded-full flex items-center justify-center mr-2">
                            <i class="fas fa-shield-alt text-blue-600"></i>
                        </div>
                        <p><strong>Shield:</strong> Protects from one collision</p>
                    </div>
                    <div class="flex items-center mb-2">
                        <div class="power-up-icon bg-yellow-200 rounded-full flex items-center justify-center mr-2">
                            <i class="fas fa-bolt text-yellow-600"></i>
                        </div>
                        <p><strong>Slow Motion:</strong> Slows down game speed for 5 seconds</p>
                    </div>
                    <div class="flex items-center">
                        <div class="power-up-icon bg-green-200 rounded-full flex items-center justify-center mr-2">
                            <i class="fas fa-times text-green-600"></i>
                        </div>
                        <p><strong>Multiplier:</strong> Doubles your points for 10 seconds</p>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg p-4 w-full mb-4">
                    <h3 class="text-xl font-semibold text-indigo-600 mb-2">Special Characters</h3>
                    <p class="mb-1"><strong>Classic Bird:</strong> Balanced character</p>
                    <p class="mb-1"><strong>Ninja Bird:</strong> Smaller hitbox but faster falling</p>
                    <p class="mb-1"><strong>Robot Bird:</strong> Heavier but can break through one pipe</p>
                    <p><strong>Ghost Bird:</strong> Can occasionally phase through pipes</p>
                </div>
                
                <button id="back-from-instructions" class="mt-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Back to Menu
                </button>
            </div>
            
            <!-- Pause Screen (initially hidden) -->
            <div id="pause-screen" class="hidden absolute inset-0 bg-black bg-opacity-50 flex flex-col items-center justify-center p-4">
                <h2 class="text-4xl font-bold text-white mb-8">Game Paused</h2>
                <button id="resume-btn" class="mb-4 bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Resume
                </button>
                <button id="quit-btn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Quit
                </button>
            </div>
        </div>
        
        <!-- Game Features -->
        <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-blue-100 p-4 rounded-lg">
                <h3 class="text-xl font-bold text-blue-800 mb-2">Multiple Characters</h3>
                <p>Choose from four unique birds, each with special abilities and characteristics!</p>
                <ul class="list-disc ml-5 mt-2">
                    <li>Classic Bird - Balanced character</li>
                    <li>Ninja Bird - Smaller hitbox but faster falling</li>
                    <li>Robot Bird - Heavier but can break through one pipe</li>
                    <li>Ghost Bird - Can occasionally phase through pipes</li>
                </ul>
            </div>
            
            <div class="bg-green-100 p-4 rounded-lg">
                <h3 class="text-xl font-bold text-green-800 mb-2">Power-ups System</h3>
                <p>Collect special items to gain advantages:</p>
                <ul class="list-disc ml-5 mt-2">
                    <li>Shield - Protects from one collision</li>
                    <li>Slow Motion - Slows down game speed</li>
                    <li>Score Multiplier - Doubles your points</li>
                    <li>Mini Bird - Shrinks your character temporarily</li>
                </ul>
            </div>
            
            <div class="bg-purple-100 p-4 rounded-lg">
                <h3 class="text-xl font-bold text-purple-800 mb-2">Multiple Environments</h3>
                <p>Play through different worlds with unique visuals and challenges:</p>
                <ul class="list-disc ml-5 mt-2">
                    <li>Day - Classic sunny environment</li>
                    <li>Night - Darker setting with glowing obstacles</li>
                    <li>Forest - Navigate through tree branches instead of pipes</li>
                    <li>Space - Low gravity environment with asteroid obstacles</li>
                </ul>
            </div>
            
            <div class="bg-yellow-100 p-4 rounded-lg">
                <h3 class="text-xl font-bold text-yellow-800 mb-2">Difficulty Levels</h3>
                <p>Challenge yourself with progressively harder gameplay:</p>
                <ul class="list-disc ml-5 mt-2">
                    <li>Easy - Wider gaps, slower speed</li>
                    <li>Medium - Standard gameplay</li>
                    <li>Hard - Faster speed, narrower gaps</li>
                    <li>Extreme - Maximum speed with moving obstacles</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Game Variables
        let canvas, ctx;
        let gameState = 'menu'; // menu, playing, paused, gameOver
        let score = 0;
        let highScore = 0;
        let gameSpeed = 2;
        let gravity = 0.5;
        let jumping = false;
        
        // Character settings
        let selectedCharacter = 'classic';
        let selectedEnvironment = 'day';
        let selectedDifficulty = 'easy';
        
        // Bird object
        const bird = {
            x: 50,
            y: 300,
            width: 40,
            height: 30,
            velocity: 0,
            jumpStrength: -10,
            
            // Character-specific properties
            characterProps: {
                classic: { width: 40, height: 30, color: '#FFD700', gravity: 0.5, jumpStrength: -10 },
                ninja: { width: 35, height: 25, color: '#333333', gravity: 0.6, jumpStrength: -10.5 },
                robot: { width: 45, height: 35, color: '#3498db', gravity: 0.7, jumpStrength: -11 },
                ghost: { width: 40, height: 30, color: '#9b59b6', gravity: 0.4, jumpStrength: -9.5 }
            },
            
            // Method to update bird properties based on selected character
            updateCharacter: function() {
                const props = this.characterProps[selectedCharacter];
                this.width = props.width;
                this.height = props.height;
                this.color = props.color;
                gravity = props.gravity;
                this.jumpStrength = props.jumpStrength;
                
                // Adjust difficulty
                switch(selectedDifficulty) {
                    case 'easy':
                        gameSpeed = 2;
                        gravity *= 0.9;
                        break;
                    case 'medium':
                        gameSpeed = 3;
                        // Default gravity
                        break;
                    case 'hard':
                        gameSpeed = 4;
                        gravity *= 1.1;
                        break;
                    case 'extreme':
                        gameSpeed = 5;
                        gravity *= 1.2;
                        break;
                }
            },
            
            // Draw the bird
            draw: function() {
                ctx.fillStyle = this.color;
                
                // Basic bird shape
                ctx.beginPath();
                ctx.ellipse(this.x, this.y, this.width/2, this.height/2, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // Add eye
                ctx.fillStyle = '#fff';
                ctx.beginPath();
                ctx.ellipse(this.x + this.width/4, this.y - this.height/6, this.width/8, this.height/8, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // Add pupil
                ctx.fillStyle = '#000';
                ctx.beginPath();
                ctx.ellipse(this.x + this.width/4, this.y - this.height/6, this.width/16, this.height/16, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // Add beak
                ctx.fillStyle = '#FF6B00';
                ctx.beginPath();
                ctx.moveTo(this.x + this.width/2, this.y);
                ctx.lineTo(this.x + this.width/2 + 15, this.y - 5);
                ctx.lineTo(this.x + this.width/2 + 15, this.y + 5);
                ctx.closePath();
                ctx.fill();
                
                // Character-specific details
                switch(selectedCharacter) {
                    case 'ninja':
                        // Ninja headband
                        ctx.fillStyle = '#c0392b';
                        ctx.fillRect(this.x - this.width/2, this.y - this.height/3, this.width, this.height/6);
                        break;
                    case 'robot':
                        // Robot antenna
                        ctx.fillStyle = '#7f8c8d';
                        ctx.fillRect(this.x, this.y - this.height/2 - 10, 2, 10);
                        ctx.beginPath();
                        ctx.arc(this.x + 1, this.y - this.height/2 - 10, 3, 0, Math.PI * 2);
                        ctx.fill();
                        break;
                    case 'ghost':
                        // Ghost transparency
                        ctx.globalAlpha = 0.7;
                        // Reset alpha
                        ctx.globalAlpha = 1;
                        break;
                }
            },
            
            // Update bird position
            update: function() {
                this.velocity += gravity;
                this.y += this.velocity;
                
                // Ground collision
                if (this.y + this.height/2 > canvas.height) {
                    this.y = canvas.height - this.height/2;
                    this.velocity = 0;
                    gameOver();
                }
                
                // Ceiling collision
                if (this.y - this.height/2 < 0) {
                    this.y = this.height/2;
                    this.velocity = 1;
                }
            },
            
            // Make the bird jump
            jump: function() {
                this.velocity = this.jumpStrength;
                jumping = true;
                setTimeout(() => { jumping = false; }, 200);
            },
            
            // Reset bird position
            reset: function() {
                this.x = 50;
                this.y = 300;
                this.velocity = 0;
            }
        };
        
        // Pipes array
        let pipes = [];
        const pipeWidth = 60;
        let pipeGap = 150; // Gap between top and bottom pipes
        let pipeSpacing = 220; // Distance between pipe pairs
        let timeSinceLastPipe = 0;
        
        // Power-ups
        let powerUps = [];
        let activePowerUps = {
            shield: false,
            slowMotion: false,
            multiplier: false,
            mini: false
        };
        let powerUpTimers = {
            shield: 0,
            slowMotion: 0,
            multiplier: 0,
            mini: 0
        };
        
        // Environment settings
        const environments = {
            day: { 
                bgColor: '#87CEEB', 
                pipeColor: '#2ecc71', 
                groundColor: '#8B4513',
                effects: {}
            },
            night: { 
                bgColor: '#191970', 
                pipeColor: '#27ae60', 
                groundColor: '#6B4226',
                effects: { glowingObstacles: true }
            },
            forest: { 
                bgColor: '#3A5F0B', 
                pipeColor: '#795548', 
                groundColor: '#4B371C',
                effects: { treeBranches: true }
            },
            space: { 
                bgColor: '#000033', 
                pipeColor: '#95a5a6', 
                groundColor: '#34495e',
                effects: { lowGravity: true, asteroids: true }
            }
        };
        
        // Initialize game
        function init() {
            canvas = document.getElementById('game-canvas');
            ctx = canvas.getContext('2d');
            
            // Set up event listeners
            document.addEventListener('keydown', function(e) {
                if (e.code === 'Space' || e.code === 'ArrowUp') {
                    handleInput();
                }
                
                if (e.code === 'KeyP') {
                    togglePause();
                }
            });
            
            canvas.addEventListener('click', handleInput);
            canvas.addEventListener('touchstart', handleInput);
            
            // Set up menu buttons
            document.getElementById('start-btn').addEventListener('click', startGame);
            document.getElementById('customize-btn').addEventListener('click', showCustomizeScreen);
            document.getElementById('instructions-btn').addEventListener('click', showInstructionsScreen);
            document.getElementById('restart-btn').addEventListener('click', startGame);
            document.getElementById('menu-btn').addEventListener('click', showMainMenu);
            document.getElementById('back-to-menu').addEventListener('click', showMainMenu);
            document.getElementById('back-from-instructions').addEventListener('click', showMainMenu);
            document.getElementById('resume-btn').addEventListener('click', resumeGame);
            document.getElementById('quit-btn').addEventListener('click', showMainMenu);
            
            // Set up character selection
            const characterOptions = document.querySelectorAll('.character-option');
            characterOptions.forEach(option => {
                option.addEventListener('click', function() {
                    characterOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedCharacter = this.getAttribute('data-character');
                });
            });
            
            // Set up environment selection
            const environmentOptions = document.querySelectorAll('.environment-option');
            environmentOptions.forEach(option => {
                option.addEventListener('click', function() {
                    environmentOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedEnvironment = this.getAttribute('data-environment');
                });
            });
            
            // Set up difficulty selection
            const difficultyButtons = document.querySelectorAll('.difficulty-btn');
            difficultyButtons.forEach(button => {
                button.addEventListener('click', function() {
                    difficultyButtons.forEach(btn => btn.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedDifficulty = this.getAttribute('data-difficulty');
                    
                    // Update pipe gap based on difficulty
                    switch(selectedDifficulty) {
                        case 'easy':
                            pipeGap = 180;
                            break;
                        case 'medium':
                            pipeGap = 150;
                            break;
                        case 'hard':
                            pipeGap = 130;
                            break;
                        case 'extreme':
                            pipeGap = 120;
                            break;
                    }
                });
            });
            
            // Try to load high score from localStorage
            if (localStorage.getItem('flappyHighScore')) {
                highScore = parseInt(localStorage.getItem('flappyHighScore'));
            }
              
    // Hide all screens
    hideAllScreens();
}

// Core gameplay functions
function birdJump() {
    // Different jump force based on environment and character
    let jumpForce = config.jumpForce;
    
    // Space environment has lower gravity effect on jumps
    if (config.environment === 'space') {
        jumpForce *= 0.8;
    }
    
    // Robot bird has heavier jumps
    if (config.character === 'robot') {
        jumpForce *= 1.2;
    }
    
    bird.velocityY = jumpForce;
}

function updateBird() {
    // Apply gravity
    let gravityValue = config.gravity;
    
    // Modify gravity based on environment
    if (config.environment === 'space') {
        gravityValue *= 0.7; // Lower gravity in space
    }
    
    // Modify falling speed based on character
    if (config.character === 'ninja') {
        gravityValue *= bird.ninjaFallingMultiplier;
    } else if (config.character === 'robot') {
        gravityValue *= 1.2; // Robot bird is heavier
    }
    
    // Apply slow motion if active
    if (config.activeSlowMotion) {
        gravityValue *= 0.5;
    }
    
    // Update vertical velocity
    bird.velocityY += gravityValue;
    
    // Update position
    bird.y += bird.velocityY;
    
    // Apply mini size power-up
    if (config.activeMiniSize) {
        bird.width = bird.originalWidth * 0.7;
        bird.height = bird.originalHeight * 0.7;
    } else {
        bird.width = bird.originalWidth;
        bird.height = bird.originalHeight;
    }
    
    // Animate bird
    if (config.frameCount % bird.animationSpeed === 0) {
        bird.frameX = (bird.frameX + 1) % bird.maxFrame;
    }
    
    // Check for collision with bounds
    if (bird.y + bird.height > config.height) {
        gameOver();
    } else if (bird.y < 0) {
        bird.y = 0;
        bird.velocityY = 0;
    }
}

function spawnPipe() {
    if (config.frameCount % config.pipeSpawnRate === 0) {
        // Calculate random gap position
        const gapPosition = Math.floor(Math.random() * (config.height - config.pipeGap - 100)) + 50;
        
        // Create top pipe
        const topPipe = {
            x: config.width,
            y: 0,
            width: config.pipeWidth,
            height: gapPosition,
            passed: false,
            moving: config.difficulty === 'extreme' // Moving pipes in extreme mode
        };
        
        // Create bottom pipe
        const bottomPipe =
Copy
Ask anything, create anything
Preview
Code
Thinking
Copy<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Flappy Adventure</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            overflow-x: hidden;
        }
        
        canvas {
            border: 2px solid #000;
            display: block;
            margin: 0 auto;
        }
        
        .game-container {
            position: relative;
            width: 400px;
            height: 600px;
            margin: 0 auto;
        }
        
        .hidden {
            display: none;
        }
        
        .character-option {
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .character-option:hover {
            transform: scale(1.1);
        }
        
        .character-option.selected {
            border: 3px solid #FFD700;
            transform: scale(1.1);
        }
        
        .environment-option {
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .environment-option:hover {
            transform: scale(1.1);
        }
        
        .environment-option.selected {
            border: 3px solid #FFD700;
        }
        
        .power-up-icon {
            width: 30px;
            height: 30px;
            margin: 0 5px;
        }
        
        .difficulty-btn {
            transition: all 0.3s;
        }
        
        .difficulty-btn.selected {
            background-color: #3182ce;
            color: white;
        }
        
        /* Make sure everything fits nicely for PDF export */
        @media print {
            body {
                width: 100%;
                margin: 0;
                padding: 0;
            }
            
            .page-break {
                page-break-before: avoid;
            }
            
            .game-container {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body class="bg-gray-100 p-4">
    <div class="max-w-4xl mx-auto bg-white shadow-lg rounded-lg overflow-hidden p-6">
        <h1 class="text-4xl font-bold text-center text-blue-600 mb-4">Super Flappy Adventure</h1>
        
        <!-- Game Description -->
        <div class="mb-6 text-center">
            <p class="text-lg">An enhanced version of the classic Flappy Bird with power-ups, multiple characters, environments, and difficulty levels!</p>
        </div>
        
        <!-- Game Screens -->
        <div class="game-container">
            <!-- Main Menu Screen -->
            <div id="main-menu" class="absolute inset-0 bg-gradient-to-b from-blue-400 to-blue-600 flex flex-col items-center justify-center p-4">
                <h2 class="text-4xl font-bold text-white mb-8">Super Flappy Adventure</h2>
                <button id="start-btn" class="mb-4 bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
                    Start Game
                </button>
                <button id="customize-btn" class="mb-4 bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
                    Customize
                </button>
                <button id="instructions-btn" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
                    Instructions
                </button>
            </div>
            
            <!-- Game Canvas (initially hidden) -->
            <canvas id="game-canvas" width="400" height="600" class="hidden"></canvas>
            
            <!-- Game Over Screen (initially hidden) -->
            <div id="game-over" class="hidden absolute inset-0 bg-black bg-opacity-80 flex flex-col items-center justify-center p-4">
                <h2 class="text-4xl font-bold text-white mb-4">Game Over</h2>
                <p id="final-score" class="text-2xl text-white mb-6">Score: 0</p>
                <p id="high-score" class="text-xl text-yellow-400 mb-8">High Score: 0</p>
                <button id="restart-btn" class="mb-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Play Again
                </button>
                <button id="menu-btn" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Main Menu
                </button>
            </div>
            
            <!-- Customization Screen (initially hidden) -->
            <div id="customize-screen" class="hidden absolute inset-0 bg-gradient-to-b from-purple-400 to-purple-600 flex flex-col items-center justify-start p-4 overflow-y-auto">
                <h2 class="text-3xl font-bold text-white mb-4">Customize Your Game</h2>
                
                <!-- Character Selection -->
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-white mb-2">Choose Your Character</h3>
                    <div class="flex space-x-4">
                        <div class="character-option selected bg-white p-2 rounded-lg" data-character="classic">
                            <div class="w-16 h-16 bg-yellow-400 rounded-full flex items-center justify-center">
                                <i class="fas fa-kiwi-bird text-2xl"></i>
                            </div>
                            <p class="text-center mt-1">Classic</p>
                        </div>
                        <div class="character-option bg-white p-2 rounded-lg" data-character="ninja">
                            <div class="w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center">
                                <i class="fas fa-kiwi-bird text-2xl text-white"></i>
                            </div>
                            <p class="text-center mt-1">Ninja</p>
                        </div>
                        <div class="character-option bg-white p-2 rounded-lg" data-character="robot">
                            <div class="w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center">
                                <i class="fas fa-robot text-2xl text-white"></i>
                            </div>
                            <p class="text-center mt-1">Robot</p>
                        </div>
                        <div class="character-option bg-white p-2 rounded-lg" data-character="ghost">
                            <div class="w-16 h-16 bg-purple-300 rounded-full flex items-center justify-center">
                                <i class="fas fa-ghost text-2xl text-white"></i>
                            </div>
                            <p class="text-center mt-1">Ghost</p>
                        </div>
                    </div>
                </div>
                
                <!-- Environment Selection -->
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-white mb-2">Choose Environment</h3>
                    <div class="flex space-x-4">
                        <div class="environment-option selected bg-white p-2 rounded-lg" data-environment="day">
                            <div class="w-16 h-16 bg-blue-400 rounded-lg flex items-center justify-center">
                                <i class="fas fa-sun text-2xl text-yellow-400"></i>
                            </div>
                            <p class="text-center mt-1">Day</p>
                        </div>
                        <div class="environment-option bg-white p-2 rounded-lg" data-environment="night">
                            <div class="w-16 h-16 bg-gray-900 rounded-lg flex items-center justify-center">
                                <i class="fas fa-moon text-2xl text-yellow-200"></i>
                            </div>
                            <p class="text-center mt-1">Night</p>
                        </div>
                        <div class="environment-option bg-white p-2 rounded-lg" data-environment="forest">
                            <div class="w-16 h-16 bg-green-700 rounded-lg flex items-center justify-center">
                                <i class="fas fa-tree text-2xl text-green-400"></i>
                            </div>
                            <p class="text-center mt-1">Forest</p>
                        </div>
                        <div class="environment-option bg-white p-2 rounded-lg" data-environment="space">
                            <div class="w-16 h-16 bg-black rounded-lg flex items-center justify-center">
                                <i class="fas fa-star text-2xl text-white"></i>
                            </div>
                            <p class="text-center mt-1">Space</p>
                        </div>
                    </div>
                </div>
                
                <!-- Difficulty Selection -->
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-white mb-2">Difficulty Level</h3>
                    <div class="flex space-x-2">
                        <button class="difficulty-btn selected px-4 py-2 bg-blue-100 rounded-lg" data-difficulty="easy">Easy</button>
                        <button class="difficulty-btn px-4 py-2 bg-blue-100 rounded-lg" data-difficulty="medium">Medium</button>
                        <button class="difficulty-btn px-4 py-2 bg-blue-100 rounded-lg" data-difficulty="hard">Hard</button>
                        <button class="difficulty-btn px-4 py-2 bg-blue-100 rounded-lg" data-difficulty="extreme">Extreme</button>
                    </div>
                </div>
                
                <button id="back-to-menu" class="mt-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Back to Menu
                </button>
            </div>
            
            <!-- Instructions Screen (initially hidden) -->
            <div id="instructions-screen" class="hidden absolute inset-0 bg-gradient-to-b from-indigo-400 to-indigo-600 flex flex-col items-center justify-start p-4 overflow-y-auto">
                <h2 class="text-3xl font-bold text-white mb-4">How to Play</h2>
                
                <div class="bg-white rounded-lg p-4 w-full mb-4">
                    <h3 class="text-xl font-semibold text-indigo-600 mb-2">Basic Controls</h3>
                    <p class="mb-2"><strong>Click, Touch or Spacebar:</strong> Make the bird fly upward</p>
                    <p class="mb-2"><strong>P key:</strong> Pause the game</p>
                </div>
                
                <div class="bg-white rounded-lg p-4 w-full mb-4">
                    <h3 class="text-xl font-semibold text-indigo-600 mb-2">Power-ups</h3>
                    <div class="flex items-center mb-2">
                        <div class="power-up-icon bg-blue-200 rounded-full flex items-center justify-center mr-2">
                            <i class="fas fa-shield-alt text-blue-600"></i>
                        </div>
                        <p><strong>Shield:</strong> Protects from one collision</p>
                    </div>
                    <div class="flex items-center mb-2">
                        <div class="power-up-icon bg-yellow-200 rounded-full flex items-center justify-center mr-2">
                            <i class="fas fa-bolt text-yellow-600"></i>
                        </div>
                        <p><strong>Slow Motion:</strong> Slows down game speed for 5 seconds</p>
                    </div>
                    <div class="flex items-center">
                        <div class="power-up-icon bg-green-200 rounded-full flex items-center justify-center mr-2">
                            <i class="fas fa-times text-green-600"></i>
                        </div>
                        <p><strong>Multiplier:</strong> Doubles your points for 10 seconds</p>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg p-4 w-full mb-4">
                    <h3 class="text-xl font-semibold text-indigo-600 mb-2">Special Characters</h3>
                    <p class="mb-1"><strong>Classic Bird:</strong> Balanced character</p>
                    <p class="mb-1"><strong>Ninja Bird:</strong> Smaller hitbox but faster falling</p>
                    <p class="mb-1"><strong>Robot Bird:</strong> Heavier but can break through one pipe</p>
                    <p><strong>Ghost Bird:</strong> Can occasionally phase through pipes</p>
                </div>
                
                <button id="back-from-instructions" class="mt-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Back to Menu
                </button>
            </div>
            
            <!-- Pause Screen (initially hidden) -->
            <div id="pause-screen" class="hidden absolute inset-0 bg-black bg-opacity-50 flex flex-col items-center justify-center p-4">
                <h2 class="text-4xl font-bold text-white mb-8">Game Paused</h2>
                <button id="resume-btn" class="mb-4 bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Resume
                </button>
                <button id="quit-btn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Quit
                </button>
            </div>
        </div>
        
        <!-- Game Features -->
        <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-blue-100 p-4 rounded-lg">
                <h3 class="text-xl font-bold text-blue-800 mb-2">Multiple Characters</h3>
                <p>Choose from four unique birds, each with special abilities and characteristics!</p>
                <ul class="list-disc ml-5 mt-2">
                    <li>Classic Bird - Balanced character</li>
                    <li>Ninja Bird - Smaller hitbox but faster falling</li>
                    <li>Robot Bird - Heavier but can break through one pipe</li>
                    <li>Ghost Bird - Can occasionally phase through pipes</li>
                </ul>
            </div>
            
            <div class="bg-green-100 p-4 rounded-lg">
                <h3 class="text-xl font-bold text-green-800 mb-2">Power-ups System</h3>
                <p>Collect special items to gain advantages:</p>
                <ul class="list-disc ml-5 mt-2">
                    <li>Shield - Protects from one collision</li>
                    <li>Slow Motion - Slows down game speed</li>
                    <li>Score Multiplier - Doubles your points</li>
                    <li>Mini Bird - Shrinks your character temporarily</li>
                </ul>
            </div>
            
            <div class="bg-purple-100 p-4 rounded-lg">
                <h3 class="text-xl font-bold text-purple-800 mb-2">Multiple Environments</h3>
                <p>Play through different worlds with unique visuals and challenges:</p>
                <ul class="list-disc ml-5 mt-2">
                    <li>Day - Classic sunny environment</li>
                    <li>Night - Darker setting with glowing obstacles</li>
                    <li>Forest - Navigate through tree branches instead of pipes</li>
                    <li>Space - Low gravity environment with asteroid obstacles</li>
                </ul>
            </div>
            
            <div class="bg-yellow-100 p-4 rounded-lg">
                <h3 class="text-xl font-bold text-yellow-800 mb-2">Difficulty Levels</h3>
                <p>Challenge yourself with progressively harder gameplay:</p>
                <ul class="list-disc ml-5 mt-2">
                    <li>Easy - Wider gaps, slower speed</li>
                    <li>Medium - Standard gameplay</li>
                    <li>Hard - Faster speed, narrower gaps</li>
                    <li>Extreme - Maximum speed with moving obstacles</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Game Variables
        let canvas, ctx;
        let gameState = 'menu'; // menu, playing, paused, gameOver
        let score = 0;
        let highScore = 0;
        let gameSpeed = 2;
        let gravity = 0.5;
        let jumping = false;
        
        // Character settings
        let selectedCharacter = 'classic';
        let selectedEnvironment = 'day';
        let selectedDifficulty = 'easy';
        
        // Bird object
        const bird = {
            x: 50,
            y: 300,
            width: 40,
            height: 30,
            velocity: 0,
            jumpStrength: -10,
            
            // Character-specific properties
            characterProps: {
                classic: { width: 40, height: 30, color: '#FFD700', gravity: 0.5, jumpStrength: -10 },
                ninja: { width: 35, height: 25, color: '#333333', gravity: 0.6, jumpStrength: -10.5 },
                robot: { width: 45, height: 35, color: '#3498db', gravity: 0.7, jumpStrength: -11 },
                ghost: { width: 40, height: 30, color: '#9b59b6', gravity: 0.4, jumpStrength: -9.5 }
            },
            
            // Method to update bird properties based on selected character
            updateCharacter: function() {
                const props = this.characterProps[selectedCharacter];
                this.width = props.width;
                this.height = props.height;
                this.color = props.color;
                gravity = props.gravity;
                this.jumpStrength = props.jumpStrength;
                
                // Adjust difficulty
                switch(selectedDifficulty) {
                    case 'easy':
                        gameSpeed = 2;
                        gravity *= 0.9;
                        break;
                    case 'medium':
                        gameSpeed = 3;
                        // Default gravity
                        break;
                    case 'hard':
                        gameSpeed = 4;
                        gravity *= 1.1;
                        break;
                    case 'extreme':
                        gameSpeed = 5;
                        gravity *= 1.2;
                        break;
                }
            },
            
            // Draw the bird
            draw: function() {
                ctx.fillStyle = this.color;
                
                // Basic bird shape
                ctx.beginPath();
                ctx.ellipse(this.x, this.y, this.width/2, this.height/2, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // Add eye
                ctx.fillStyle = '#fff';
                ctx.beginPath();
                ctx.ellipse(this.x + this.width/4, this.y - this.height/6, this.width/8, this.height/8, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // Add pupil
                ctx.fillStyle = '#000';
                ctx.beginPath();
                ctx.ellipse(this.x + this.width/4, this.y - this.height/6, this.width/16, this.height/16, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // Add beak
                ctx.fillStyle = '#FF6B00';
                ctx.beginPath();
                ctx.moveTo(this.x + this.width/2, this.y);
                ctx.lineTo(this.x + this.width/2 + 15, this.y - 5);
                ctx.lineTo(this.x + this.width/2 + 15, this.y + 5);
                ctx.closePath();
                ctx.fill();
                
                // Character-specific details
                switch(selectedCharacter) {
                    case 'ninja':
                        // Ninja headband
                        ctx.fillStyle = '#c0392b';
                        ctx.fillRect(this.x - this.width/2, this.y - this.height/3, this.width, this.height/6);
                        break;
                    case 'robot':
                        // Robot antenna
                        ctx.fillStyle = '#7f8c8d';
                        ctx.fillRect(this.x, this.y - this.height/2 - 10, 2, 10);
                        ctx.beginPath();
                        ctx.arc(this.x + 1, this.y - this.height/2 - 10, 3, 0, Math.PI * 2);
                        ctx.fill();
                        break;
                    case 'ghost':
                        // Ghost transparency
                        ctx.globalAlpha = 0.7;
                        // Reset alpha
                        ctx.globalAlpha = 1;
                        break;
                }
            },
            
            // Update bird position
            update: function() {
                this.velocity += gravity;
                this.y += this.velocity;
                
                // Ground collision
                if (this.y + this.height/2 > canvas.height) {
                    this.y = canvas.height - this.height/2;
                    this.velocity = 0;
                    gameOver();
                }
                
                // Ceiling collision
                if (this.y - this.height/2 < 0) {
                    this.y = this.height/2;
                    this.velocity = 1;
                }
            },
            
            // Make the bird jump
            jump: function() {
                this.velocity = this.jumpStrength;
                jumping = true;
                setTimeout(() => { jumping = false; }, 200);
            },
            
            // Reset bird position
            reset: function() {
                this.x = 50;
                this.y = 300;
                this.velocity = 0;
            }
        };
        
        // Pipes array
        let pipes = [];
        const pipeWidth = 60;
        let pipeGap = 150; // Gap between top and bottom pipes
        let pipeSpacing = 220; // Distance between pipe pairs
        let timeSinceLastPipe = 0;
        
        // Power-ups
        let powerUps = [];
        let activePowerUps = {
            shield: false,
            slowMotion: false,
            multiplier: false,
            mini: false
        };
        let powerUpTimers = {
            shield: 0,
            slowMotion: 0,
            multiplier: 0,
            mini: 0
        };
        
        // Environment settings
        const environments = {
            day: { 
                bgColor: '#87CEEB', 
                pipeColor: '#2ecc71', 
                groundColor: '#8B4513',
                effects: {}
            },
            night: { 
                bgColor: '#191970', 
                pipeColor: '#27ae60', 
                groundColor: '#6B4226',
                effects: { glowingObstacles: true }
            },
            forest: { 
                bgColor: '#3A5F0B', 
                pipeColor: '#795548', 
                groundColor: '#4B371C',
                effects: { treeBranches: true }
            },
            space: { 
                bgColor: '#000033', 
                pipeColor: '#95a5a6', 
                groundColor: '#34495e',
                effects: { lowGravity: true, asteroids: true }
            }
        };
        
        // Initialize game
        function init() {
            canvas = document.getElementById('game-canvas');
            ctx = canvas.getContext('2d');
            
            // Set up event listeners
            document.addEventListener('keydown', function(e) {
                if (e.code === 'Space' || e.code === 'ArrowUp') {
                    handleInput();
                }
                
                if (e.code === 'KeyP') {
                    togglePause();
                }
            });
            
            canvas.addEventListener('click', handleInput);
            canvas.addEventListener('touchstart', handleInput);
            
            // Set up menu buttons
            document.getElementById('start-btn').addEventListener('click', startGame);
            document.getElementById('customize-btn').addEventListener('click', showCustomizeScreen);
            document.getElementById('instructions-btn').addEventListener('click', showInstructionsScreen);
            document.getElementById('restart-btn').addEventListener('click', startGame);
            document.getElementById('menu-btn').addEventListener('click', showMainMenu);
            document.getElementById('back-to-menu').addEventListener('click', showMainMenu);
            document.getElementById('back-from-instructions').addEventListener('click', showMainMenu);
            document.getElementById('resume-btn').addEventListener('click', resumeGame);
            document.getElementById('quit-btn').addEventListener('click', showMainMenu);
            
            // Set up character selection
            const characterOptions = document.querySelectorAll('.character-option');
            characterOptions.forEach(option => {
                option.addEventListener('click', function() {
                    characterOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedCharacter = this.getAttribute('data-character');
                });
            });
            
            // Set up environment selection
            const environmentOptions = document.querySelectorAll('.environment-option');
            environmentOptions.forEach(option => {
                option.addEventListener('click', function() {
                    environmentOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedEnvironment = this.getAttribute('data-environment');
                });
            });
            
            // Set up difficulty selection
            const difficultyButtons = document.querySelectorAll('.difficulty-btn');
            difficultyButtons.forEach(button => {
                button.addEventListener('click', function() {
                    difficultyButtons.forEach(btn => btn.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedDifficulty = this.getAttribute('data-difficulty');
                    
                    // Update pipe gap based on difficulty
                    switch(selectedDifficulty) {
                        case 'easy':
                            pipeGap = 180;
                            break;
                        case 'medium':
                            pipeGap = 150;
                            break;
                        case 'hard':
                            pipeGap = 130;
                            break;
                        case 'extreme':
                            pipeGap = 120;
                            break;
                    }
                });
            });
            
            // Try to load high score from localStorage
            if (localStorage.getItem('flappyHighScore')) {
                highScore = parseInt(localStorage.getItem('flappyHighScore'));
            }
        }
        
        // Handle input (jump)
        function handleInput(e) {
            if (e) e.preventDefault();
            
            if (gameState === 'playing' && !jumping) {
                bird.jump();
            }
        }
        
        // Start game
        function startGame() {
            // Hide all screens and show canvas
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('game-over').classList.add('hidden');
            document.getElementById('customize-screen').classList.add('hidden');
            document.getElementById('instructions-screen').classList.add('hidden');
            document.getElementById('pause-screen').classList.add('hidden');
            document.getElementById('game-canvas').classList.remove('hidden');
            
            // Reset game state
            gameState = 'playing';
            score = 0;
            pipes = [];
            powerUps = [];
            activePowerUps = {
                shield: false,
                slowMotion: false,
                multiplier: false,
                mini: false
            };
            bird.reset();
            bird.updateCharacter();
            
            // Start game loop
            gameLoop();
        }
        
        // Toggle pause state
        function togglePause() {
            if (gameState === 'playing') {
                gameState = 'paused';
                document.getElementById('pause-screen').classList.remove('hidden');
            } else if (gameState === 'paused') {
                resumeGame();
            }
        }
        
        // Resume game from pause
        function resumeGame() {
            gameState = 'playing';
            document.getElementById('pause-screen').classList.add('hidden');
            gameLoop();
        }
        
        // Show main menu
        function showMainMenu() {
            gameState = 'menu';
            document.getElementById('main-menu').classList.remove('hidden');
            document.getElementById('game-over').classList.add('hidden');
            document.getElementById('customize-screen').classList.add('hidden');
            document.getElementById('instructions-screen').classList.add('hidden');
            document.getElementById('pause-screen').classList.add('hidden');
            document.getElementById('game-canvas').classList.add('hidden');
        }
        
        // Show customize screen
        function showCustomizeScreen() {
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('customize-screen').classList.remove('hidden');
        }
        
        // Show instructions screen
        function showInstructionsScreen() {
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('instructions-screen').classList.remove('hidden');
        }
        
        // Game over
        function gameOver() {
            gameState = 'gameOver';
            document.getElementById('final-score').textContent = `Score: ${score}`;
                pipes.length = 0;
    powerUps.length = 0;
    
    // Hide all screens
    hideAllScreens();
}

// Core gameplay functions
function birdJump() {
    // Different jump force based on environment and character
    let jumpForce = config.jumpForce;
    
    // Space environment has lower gravity effect on jumps
    if (config.environment === 'space') {
        jumpForce *= 0.8;
    }
    
    // Robot bird has heavier jumps
    if (config.character === 'robot') {
        jumpForce *= 1.2;
    }
    
    bird.velocityY = jumpForce;
}

function updateBird() {
    // Apply gravity
    let gravityValue = config.gravity;
    
    // Modify gravity based on environment
    if (config.environment === 'space') {
        gravityValue *= 0.7; // Lower gravity in space
    }
    
    // Modify falling speed based on character
    if (config.character === 'ninja') {
        gravityValue *= bird.ninjaFallingMultiplier;
    } else if (config.character === 'robot') {
        gravityValue *= 1.2; // Robot bird is heavier
    }
    
    // Apply slow motion if active
    if (config.activeSlowMotion) {
        gravityValue *= 0.5;
    }
    
    // Update vertical velocity
    bird.velocityY += gravityValue;
    
    // Update position
    bird.y += bird.velocityY;
    
    // Apply mini size power-up
    if (config.activeMiniSize) {
        bird.width = bird.originalWidth * 0.7;
        bird.height = bird.originalHeight * 0.7;
    } else {
        bird.width = bird.originalWidth;
        bird.height = bird.originalHeight;
    }
    
    // Animate bird
    if (config.frameCount % bird.animationSpeed === 0) {
        bird.frameX = (bird.frameX + 1) % bird.maxFrame;
    }
    
    // Check for collision with bounds
    if (bird.y + bird.height > config.height) {
        gameOver();
    } else if (bird.y < 0) {
        bird.y = 0;
        bird.velocityY = 0;
    }
}

function spawnPipe() {
    if (config.frameCount % config.pipeSpawnRate === 0) {
        // Calculate random gap position
        const gapPosition = Math.floor(Math.random() * (config.height - config.pipeGap - 100)) + 50;
        
        // Create top pipe
        const topPipe = {
            x: config.width,
            y: 0,
            width: config.pipeWidth,
            height: gapPosition,
            passed: false,
            moving: config.difficulty === 'extreme' // Moving pipes in extreme mode
        };
        
        // Create bottom pipe
        const bottomPipe =
Copy
Ask anything, create anything
Preview
Code
Thinking
Copy<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Flappy Adventure</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            overflow-x: hidden;
        }
        
        canvas {
            border: 2px solid #000;
            display: block;
            margin: 0 auto;
        }
        
        .game-container {
            position: relative;
            width: 400px;
            height: 600px;
            margin: 0 auto;
        }
        
        .hidden {
            display: none;
        }
        
        .character-option {
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .character-option:hover {
            transform: scale(1.1);
        }
        
        .character-option.selected {
            border: 3px solid #FFD700;
            transform: scale(1.1);
        }
        
        .environment-option {
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .environment-option:hover {
            transform: scale(1.1);
        }
        
        .environment-option.selected {
            border: 3px solid #FFD700;
        }
        
        .power-up-icon {
            width: 30px;
            height: 30px;
            margin: 0 5px;
        }
        
        .difficulty-btn {
            transition: all 0.3s;
        }
        
        .difficulty-btn.selected {
            background-color: #3182ce;
            color: white;
        }
        
        /* Make sure everything fits nicely for PDF export */
        @media print {
            body {
                width: 100%;
                margin: 0;
                padding: 0;
            }
            
            .page-break {
                page-break-before: avoid;
            }
            
            .game-container {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body class="bg-gray-100 p-4">
    <div class="max-w-4xl mx-auto bg-white shadow-lg rounded-lg overflow-hidden p-6">
        <h1 class="text-4xl font-bold text-center text-blue-600 mb-4">Super Flappy Adventure</h1>
        
        <!-- Game Description -->
        <div class="mb-6 text-center">
            <p class="text-lg">An enhanced version of the classic Flappy Bird with power-ups, multiple characters, environments, and difficulty levels!</p>
        </div>
        
        <!-- Game Screens -->
        <div class="game-container">
            <!-- Main Menu Screen -->
            <div id="main-menu" class="absolute inset-0 bg-gradient-to-b from-blue-400 to-blue-600 flex flex-col items-center justify-center p-4">
                <h2 class="text-4xl font-bold text-white mb-8">Super Flappy Adventure</h2>
                <button id="start-btn" class="mb-4 bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
                    Start Game
                </button>
                <button id="customize-btn" class="mb-4 bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
                    Customize
                </button>
                <button id="instructions-btn" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
                    Instructions
                </button>
            </div>
            
            <!-- Game Canvas (initially hidden) -->
            <canvas id="game-canvas" width="400" height="600" class="hidden"></canvas>
            
            <!-- Game Over Screen (initially hidden) -->
            <div id="game-over" class="hidden absolute inset-0 bg-black bg-opacity-80 flex flex-col items-center justify-center p-4">
                <h2 class="text-4xl font-bold text-white mb-4">Game Over</h2>
                <p id="final-score" class="text-2xl text-white mb-6">Score: 0</p>
                <p id="high-score" class="text-xl text-yellow-400 mb-8">High Score: 0</p>
                <button id="restart-btn" class="mb-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Play Again
                </button>
                <button id="menu-btn" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Main Menu
                </button>
            </div>
            
            <!-- Customization Screen (initially hidden) -->
            <div id="customize-screen" class="hidden absolute inset-0 bg-gradient-to-b from-purple-400 to-purple-600 flex flex-col items-center justify-start p-4 overflow-y-auto">
                <h2 class="text-3xl font-bold text-white mb-4">Customize Your Game</h2>
                
                <!-- Character Selection -->
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-white mb-2">Choose Your Character</h3>
                    <div class="flex space-x-4">
                        <div class="character-option selected bg-white p-2 rounded-lg" data-character="classic">
                            <div class="w-16 h-16 bg-yellow-400 rounded-full flex items-center justify-center">
                                <i class="fas fa-kiwi-bird text-2xl"></i>
                            </div>
                            <p class="text-center mt-1">Classic</p>
                        </div>
                        <div class="character-option bg-white p-2 rounded-lg" data-character="ninja">
                            <div class="w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center">
                                <i class="fas fa-kiwi-bird text-2xl text-white"></i>
                            </div>
                            <p class="text-center mt-1">Ninja</p>
                        </div>
                        <div class="character-option bg-white p-2 rounded-lg" data-character="robot">
                            <div class="w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center">
                                <i class="fas fa-robot text-2xl text-white"></i>
                            </div>
                            <p class="text-center mt-1">Robot</p>
                        </div>
                        <div class="character-option bg-white p-2 rounded-lg" data-character="ghost">
                            <div class="w-16 h-16 bg-purple-300 rounded-full flex items-center justify-center">
                                <i class="fas fa-ghost text-2xl text-white"></i>
                            </div>
                            <p class="text-center mt-1">Ghost</p>
                        </div>
                    </div>
                </div>
                
                <!-- Environment Selection -->
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-white mb-2">Choose Environment</h3>
                    <div class="flex space-x-4">
                        <div class="environment-option selected bg-white p-2 rounded-lg" data-environment="day">
                            <div class="w-16 h-16 bg-blue-400 rounded-lg flex items-center justify-center">
                                <i class="fas fa-sun text-2xl text-yellow-400"></i>
                            </div>
                            <p class="text-center mt-1">Day</p>
                        </div>
                        <div class="environment-option bg-white p-2 rounded-lg" data-environment="night">
                            <div class="w-16 h-16 bg-gray-900 rounded-lg flex items-center justify-center">
                                <i class="fas fa-moon text-2xl text-yellow-200"></i>
                            </div>
                            <p class="text-center mt-1">Night</p>
                        </div>
                        <div class="environment-option bg-white p-2 rounded-lg" data-environment="forest">
                            <div class="w-16 h-16 bg-green-700 rounded-lg flex items-center justify-center">
                                <i class="fas fa-tree text-2xl text-green-400"></i>
                            </div>
                            <p class="text-center mt-1">Forest</p>
                        </div>
                        <div class="environment-option bg-white p-2 rounded-lg" data-environment="space">
                            <div class="w-16 h-16 bg-black rounded-lg flex items-center justify-center">
                                <i class="fas fa-star text-2xl text-white"></i>
                            </div>
                            <p class="text-center mt-1">Space</p>
                        </div>
                    </div>
                </div>
                
                <!-- Difficulty Selection -->
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-white mb-2">Difficulty Level</h3>
                    <div class="flex space-x-2">
                        <button class="difficulty-btn selected px-4 py-2 bg-blue-100 rounded-lg" data-difficulty="easy">Easy</button>
                        <button class="difficulty-btn px-4 py-2 bg-blue-100 rounded-lg" data-difficulty="medium">Medium</button>
                        <button class="difficulty-btn px-4 py-2 bg-blue-100 rounded-lg" data-difficulty="hard">Hard</button>
                        <button class="difficulty-btn px-4 py-2 bg-blue-100 rounded-lg" data-difficulty="extreme">Extreme</button>
                    </div>
                </div>
                
                <button id="back-to-menu" class="mt-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Back to Menu
                </button>
            </div>
            
            <!-- Instructions Screen (initially hidden) -->
            <div id="instructions-screen" class="hidden absolute inset-0 bg-gradient-to-b from-indigo-400 to-indigo-600 flex flex-col items-center justify-start p-4 overflow-y-auto">
                <h2 class="text-3xl font-bold text-white mb-4">How to Play</h2>
                
                <div class="bg-white rounded-lg p-4 w-full mb-4">
                    <h3 class="text-xl font-semibold text-indigo-600 mb-2">Basic Controls</h3>
                    <p class="mb-2"><strong>Click, Touch or Spacebar:</strong> Make the bird fly upward</p>
                    <p class="mb-2"><strong>P key:</strong> Pause the game</p>
                </div>
                
                <div class="bg-white rounded-lg p-4 w-full mb-4">
                    <h3 class="text-xl font-semibold text-indigo-600 mb-2">Power-ups</h3>
                    <div class="flex items-center mb-2">
                        <div class="power-up-icon bg-blue-200 rounded-full flex items-center justify-center mr-2">
                            <i class="fas fa-shield-alt text-blue-600"></i>
                        </div>
                        <p><strong>Shield:</strong> Protects from one collision</p>
                    </div>
                    <div class="flex items-center mb-2">
                        <div class="power-up-icon bg-yellow-200 rounded-full flex items-center justify-center mr-2">
                            <i class="fas fa-bolt text-yellow-600"></i>
                        </div>
                        <p><strong>Slow Motion:</strong> Slows down game speed for 5 seconds</p>
                    </div>
                    <div class="flex items-center">
                        <div class="power-up-icon bg-green-200 rounded-full flex items-center justify-center mr-2">
                            <i class="fas fa-times text-green-600"></i>
                        </div>
                        <p><strong>Multiplier:</strong> Doubles your points for 10 seconds</p>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg p-4 w-full mb-4">
                    <h3 class="text-xl font-semibold text-indigo-600 mb-2">Special Characters</h3>
                    <p class="mb-1"><strong>Classic Bird:</strong> Balanced character</p>
                    <p class="mb-1"><strong>Ninja Bird:</strong> Smaller hitbox but faster falling</p>
                    <p class="mb-1"><strong>Robot Bird:</strong> Heavier but can break through one pipe</p>
                    <p><strong>Ghost Bird:</strong> Can occasionally phase through pipes</p>
                </div>
                
                <button id="back-from-instructions" class="mt-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Back to Menu
                </button>
            </div>
            
            <!-- Pause Screen (initially hidden) -->
            <div id="pause-screen" class="hidden absolute inset-0 bg-black bg-opacity-50 flex flex-col items-center justify-center p-4">
                <h2 class="text-4xl font-bold text-white mb-8">Game Paused</h2>
                <button id="resume-btn" class="mb-4 bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Resume
                </button>
                <button id="quit-btn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Quit
                </button>
            </div>
        </div>
        
        <!-- Game Features -->
        <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-blue-100 p-4 rounded-lg">
                <h3 class="text-xl font-bold text-blue-800 mb-2">Multiple Characters</h3>
                <p>Choose from four unique birds, each with special abilities and characteristics!</p>
                <ul class="list-disc ml-5 mt-2">
                    <li>Classic Bird - Balanced character</li>
                    <li>Ninja Bird - Smaller hitbox but faster falling</li>
                    <li>Robot Bird - Heavier but can break through one pipe</li>
                    <li>Ghost Bird - Can occasionally phase through pipes</li>
                </ul>
            </div>
            
            <div class="bg-green-100 p-4 rounded-lg">
                <h3 class="text-xl font-bold text-green-800 mb-2">Power-ups System</h3>
                <p>Collect special items to gain advantages:</p>
                <ul class="list-disc ml-5 mt-2">
                    <li>Shield - Protects from one collision</li>
                    <li>Slow Motion - Slows down game speed</li>
                    <li>Score Multiplier - Doubles your points</li>
                    <li>Mini Bird - Shrinks your character temporarily</li>
                </ul>
            </div>
            
            <div class="bg-purple-100 p-4 rounded-lg">
                <h3 class="text-xl font-bold text-purple-800 mb-2">Multiple Environments</h3>
                <p>Play through different worlds with unique visuals and challenges:</p>
                <ul class="list-disc ml-5 mt-2">
                    <li>Day - Classic sunny environment</li>
                    <li>Night - Darker setting with glowing obstacles</li>
                    <li>Forest - Navigate through tree branches instead of pipes</li>
                    <li>Space - Low gravity environment with asteroid obstacles</li>
                </ul>
            </div>
            
            <div class="bg-yellow-100 p-4 rounded-lg">
                <h3 class="text-xl font-bold text-yellow-800 mb-2">Difficulty Levels</h3>
                <p>Challenge yourself with progressively harder gameplay:</p>
                <ul class="list-disc ml-5 mt-2">
                    <li>Easy - Wider gaps, slower speed</li>
                    <li>Medium - Standard gameplay</li>
                    <li>Hard - Faster speed, narrower gaps</li>
                    <li>Extreme - Maximum speed with moving obstacles</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Game Variables
        let canvas, ctx;
        let gameState = 'menu'; // menu, playing, paused, gameOver
        let score = 0;
        let highScore = 0;
        let gameSpeed = 2;
        let gravity = 0.5;
        let jumping = false;
        
        // Character settings
        let selectedCharacter = 'classic';
        let selectedEnvironment = 'day';
        let selectedDifficulty = 'easy';
        
        // Bird object
        const bird = {
            x: 50,
            y: 300,
            width: 40,
            height: 30,
            velocity: 0,
            jumpStrength: -10,
            
            // Character-specific properties
            characterProps: {
                classic: { width: 40, height: 30, color: '#FFD700', gravity: 0.5, jumpStrength: -10 },
                ninja: { width: 35, height: 25, color: '#333333', gravity: 0.6, jumpStrength: -10.5 },
                robot: { width: 45, height: 35, color: '#3498db', gravity: 0.7, jumpStrength: -11 },
                ghost: { width: 40, height: 30, color: '#9b59b6', gravity: 0.4, jumpStrength: -9.5 }
            },
            
            // Method to update bird properties based on selected character
            updateCharacter: function() {
                const props = this.characterProps[selectedCharacter];
                this.width = props.width;
                this.height = props.height;
                this.color = props.color;
                gravity = props.gravity;
                this.jumpStrength = props.jumpStrength;
                
                // Adjust difficulty
                switch(selectedDifficulty) {
                    case 'easy':
                        gameSpeed = 2;
                        gravity *= 0.9;
                        break;
                    case 'medium':
                        gameSpeed = 3;
                        // Default gravity
                        break;
                    case 'hard':
                        gameSpeed = 4;
                        gravity *= 1.1;
                        break;
                    case 'extreme':
                        gameSpeed = 5;
                        gravity *= 1.2;
                        break;
                }
            },
            
            // Draw the bird
            draw: function() {
                ctx.fillStyle = this.color;
                
                // Basic bird shape
                ctx.beginPath();
                ctx.ellipse(this.x, this.y, this.width/2, this.height/2, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // Add eye
                ctx.fillStyle = '#fff';
                ctx.beginPath();
                ctx.ellipse(this.x + this.width/4, this.y - this.height/6, this.width/8, this.height/8, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // Add pupil
                ctx.fillStyle = '#000';
                ctx.beginPath();
                ctx.ellipse(this.x + this.width/4, this.y - this.height/6, this.width/16, this.height/16, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // Add beak
                ctx.fillStyle = '#FF6B00';
                ctx.beginPath();
                ctx.moveTo(this.x + this.width/2, this.y);
                ctx.lineTo(this.x + this.width/2 + 15, this.y - 5);
                ctx.lineTo(this.x + this.width/2 + 15, this.y + 5);
                ctx.closePath();
                ctx.fill();
                
                // Character-specific details
                switch(selectedCharacter) {
                    case 'ninja':
                        // Ninja headband
                        ctx.fillStyle = '#c0392b';
                        ctx.fillRect(this.x - this.width/2, this.y - this.height/3, this.width, this.height/6);
                        break;
                    case 'robot':
                        // Robot antenna
                        ctx.fillStyle = '#7f8c8d';
                        ctx.fillRect(this.x, this.y - this.height/2 - 10, 2, 10);
                        ctx.beginPath();
                        ctx.arc(this.x + 1, this.y - this.height/2 - 10, 3, 0, Math.PI * 2);
                        ctx.fill();
                        break;
                    case 'ghost':
                        // Ghost transparency
                        ctx.globalAlpha = 0.7;
                        // Reset alpha
                        ctx.globalAlpha = 1;
                        break;
                }
            },
            
            // Update bird position
            update: function() {
                this.velocity += gravity;
                this.y += this.velocity;
                
                // Ground collision
                if (this.y + this.height/2 > canvas.height) {
                    this.y = canvas.height - this.height/2;
                    this.velocity = 0;
                    gameOver();
                }
                
                // Ceiling collision
                if (this.y - this.height/2 < 0) {
                    this.y = this.height/2;
                    this.velocity = 1;
                }
            },
            
            // Make the bird jump
            jump: function() {
                this.velocity = this.jumpStrength;
                jumping = true;
                setTimeout(() => { jumping = false; }, 200);
            },
            
            // Reset bird position
            reset: function() {
                this.x = 50;
                this.y = 300;
                this.velocity = 0;
            }
        };
        
        // Pipes array
        let pipes = [];
        const pipeWidth = 60;
        let pipeGap = 150; // Gap between top and bottom pipes
        let pipeSpacing = 220; // Distance between pipe pairs
        let timeSinceLastPipe = 0;
        
        // Power-ups
        let powerUps = [];
        let activePowerUps = {
            shield: false,
            slowMotion: false,
            multiplier: false,
            mini: false
        };
        let powerUpTimers = {
            shield: 0,
            slowMotion: 0,
            multiplier: 0,
            mini: 0
        };
        
        // Environment settings
        const environments = {
            day: { 
                bgColor: '#87CEEB', 
                pipeColor: '#2ecc71', 
                groundColor: '#8B4513',
                effects: {}
            },
            night: { 
                bgColor: '#191970', 
                pipeColor: '#27ae60', 
                groundColor: '#6B4226',
                effects: { glowingObstacles: true }
            },
            forest: { 
                bgColor: '#3A5F0B', 
                pipeColor: '#795548', 
                groundColor: '#4B371C',
                effects: { treeBranches: true }
            },
            space: { 
                bgColor: '#000033', 
                pipeColor: '#95a5a6', 
                groundColor: '#34495e',
                effects: { lowGravity: true, asteroids: true }
            }
        };
        
        // Initialize game
        function init() {
            canvas = document.getElementById('game-canvas');
            ctx = canvas.getContext('2d');
            
            // Set up event listeners
            document.addEventListener('keydown', function(e) {
                if (e.code === 'Space' || e.code === 'ArrowUp') {
                    handleInput();
                }
                
                if (e.code === 'KeyP') {
                    togglePause();
                }
            });
            
            canvas.addEventListener('click', handleInput);
            canvas.addEventListener('touchstart', handleInput);
            
            // Set up menu buttons
            document.getElementById('start-btn').addEventListener('click', startGame);
            document.getElementById('customize-btn').addEventListener('click', showCustomizeScreen);
            document.getElementById('instructions-btn').addEventListener('click', showInstructionsScreen);
            document.getElementById('restart-btn').addEventListener('click', startGame);
            document.getElementById('menu-btn').addEventListener('click', showMainMenu);
            document.getElementById('back-to-menu').addEventListener('click', showMainMenu);
            document.getElementById('back-from-instructions').addEventListener('click', showMainMenu);
            document.getElementById('resume-btn').addEventListener('click', resumeGame);
            document.getElementById('quit-btn').addEventListener('click', showMainMenu);
            
            // Set up character selection
            const characterOptions = document.querySelectorAll('.character-option');
            characterOptions.forEach(option => {
                option.addEventListener('click', function() {
                    characterOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedCharacter = this.getAttribute('data-character');
                });
            });
            
            // Set up environment selection
            const environmentOptions = document.querySelectorAll('.environment-option');
            environmentOptions.forEach(option => {
                option.addEventListener('click', function() {
                    environmentOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedEnvironment = this.getAttribute('data-environment');
                });
            });
            
            // Set up difficulty selection
            const difficultyButtons = document.querySelectorAll('.difficulty-btn');
            difficultyButtons.forEach(button => {
                button.addEventListener('click', function() {
                    difficultyButtons.forEach(btn => btn.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedDifficulty = this.getAttribute('data-difficulty');
                    
                    // Update pipe gap based on difficulty
                    switch(selectedDifficulty) {
                        case 'easy':
                            pipeGap = 180;
                            break;
                        case 'medium':
                            pipeGap = 150;
                            break;
                        case 'hard':
                            pipeGap = 130;
                            break;
                        case 'extreme':
                            pipeGap = 120;
                            break;
                    }
                });
            });
            
            // Try to load high score from localStorage
            if (localStorage.getItem('flappyHighScore')) {
                highScore = parseInt(localStorage.getItem('flappyHighScore'));
            }
        }
        
        // Handle input (jump)
        function handleInput(e) {
            if (e) e.preventDefault();
            
            if (gameState === 'playing' && !jumping) {
                bird.jump();
            }
        }
        
        // Start game
        function startGame() {
            // Hide all screens and show canvas
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('game-over').classList.add('hidden');
            document.getElementById('customize-screen').classList.add('hidden');
            document.getElementById('instructions-screen').classList.add('hidden');
            document.getElementById('pause-screen').classList.add('hidden');
            document.getElementById('game-canvas').classList.remove('hidden');
            
            // Reset game state
            gameState = 'playing';
            score = 0;
            pipes = [];
            powerUps = [];
            activePowerUps = {
                shield: false,
                slowMotion: false,
                multiplier: false,
                mini: false
            };
            bird.reset();
            bird.updateCharacter();
            
            // Start game loop
            gameLoop();
        }
        
        // Toggle pause state
        function togglePause() {
            if (gameState === 'playing') {
                gameState = 'paused';
                document.getElementById('pause-screen').classList.remove('hidden');
            } else if (gameState === 'paused') {
                resumeGame();
            }
        }
        
        // Resume game from pause
        function resumeGame() {
            gameState = 'playing';
            document.getElementById('pause-screen').classList.add('hidden');
            gameLoop();
        }
        
        // Show main menu
        function showMainMenu() {
            gameState = 'menu';
            document.getElementById('main-menu').classList.remove('hidden');
            document.getElementById('game-over').classList.add('hidden');
            document.getElementById('customize-screen').classList.add('hidden');
            document.getElementById('instructions-screen').classList.add('hidden');
            document.getElementById('pause-screen').classList.add('hidden');
            document.getElementById('game-canvas').classList.add('hidden');
        }
        
        // Show customize screen
        function showCustomizeScreen() {
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('customize-screen').classList.remove('hidden');
        }
        
        // Show instructions screen
        function showInstructionsScreen() {
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('instructions-screen').classList.remove('hidden');
        }
        
        // Game over
        function gameOver() {
            gameState = 'gameOver';
            document.getElementById('final-score').textContent = `Score: ${score}`;
            
            // Update high score if needed
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('flappyHighScore', highScore);
            }
            
            document.getElementById('high-score').textContent = `High Score: ${highScore}`;
            document.getElementById('game-over').classList.remove('hidden');
        }
        
        // Create a pipe pair
        function createPipe() {
            const minHeight = 50;
            const maxHeight = canvas.height - pipeGap - minHeight;
            const height = Math.floor(Math.random() * (maxHeight - minHeight + 1)) + minHeight;
            
            // Create top pipe
            pipes.push({
                x: canvas.width,
                y: 0,
                width: pipeWidth,
                height: height,
                passed: false
            });
            
            // Create bottom pipe
            pipes.push({
                x: canvas.width,
                y: height + pipeGap,
                width: pipeWidth,
                height: canvas.height - height - pipeGap,
                passed: false
            });
            
            // Randomly create power-up
            if (Math.random() < 0.3) { // 30% chance
                createPowerUp(canvas.width + pipeWidth/2, height + pipeGap/2);
            }
        }
        
        // Create a power-up
        function createPowerUp(x, y) {
            const types = ['shield', 'slowMotion', 'multiplier', 'mini'];
            const type = types[Math.floor(Math.random() * types.length)];
            
            powerUps.push({
                x: x,
                y: y,
                type: type,
                width: 30,
                height: 30,
                collected: false
            });
        }
        
        // Draw game elements
        function draw() {
            const env = environments[selectedEnvironment];
            
            // Draw background
            ctx.fillStyle = env.bgColor;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw stars in space environment
            if (selectedEnvironment === 'space') {
                ctx.fillStyle = 'white';
                for (let i = 0; i < 50; i++) {
                    const size = Math.random() * 3;
                    ctx.beginPath();
                    ctx.arc(
                        Math.random() * canvas.width,
                        Math.random() * canvas.height,
                        size,
                        0,
                        Math.PI * 2
                    );
                    ctx.fill();
                }
            }
            
            // Draw pipes
            pipes.forEach(pipe => {
                ctx.fillStyle = env.pipeColor;
                
                if (env.effects.glowingObstacles) {
                    ctx.shadowBlur = 10;
                    ctx.shadowColor = "#3498db";
                }
                
                if (env.effects.treeBranches) {
                    // Draw branch texture
                    ctx.fillRect(pipe.x, pipe.y, pipe.width, pipe.height);
                    
                    // Add some texture to branches
                    ctx.fillStyle = '#5D4037';
                    for (let i = 0; i < 5; i++) {
                        ctx.fillRect(
                            pipe.x + Math.random() * pipe.width,
                            pipe.y + Math.random() * pipe.height,
                            5,
                            3
                        );
                    }
                } else if (env.effects.asteroids && pipe.height < canvas.height/2) {
                    // Draw asteroids instead of pipes
                    ctx.beginPath();
                    ctx.ellipse(
                        pipe.x + pipe.width/2,
                        pipe.y + pipe.height/2,
                        pipe.width/2,
                        pipe.height/2,
                        0,
                        0,
                        Math.PI * 2
                    );
                    ctx.fill();
                    
                    // Add crater details
                    ctx.fillStyle = '#7f8c8d';
                    ctx.beginPath();
                    ctx.arc(
                        pipe.x + pipe.width/2 + 10,
                        pipe.y + pipe.height/2 - 10,
                        5,
                        0,
                        Math.PI * 2
                    );
                    ctx.fill();
                } else {
                    // Standard pipe
                    ctx.fillRect(pipe.x, pipe.y, pipe.width, pipe.height);
                    
                    // Pipe cap
                    ctx.fillStyle = '#27ae60';
                    const capWidth = 10;
                    if (pipe.y === 0) {
                        ctx.fillRect(pipe.x - capWidth/2, pipe.height - 20, pipe.width + capWidth, 20);
                    } else {
                        ctx.fillRect(pipe.x - capWidth/2, pipe.y, pipe.width + capWidth, 20);
                    }
                }
                
                // Reset shadow
                ctx.shadowBlur = 0;
            });
            
            // Draw power-ups
            powerUps.forEach(powerUp => {
                if (!powerUp.collected) {
                    ctx.save();
                    ctx.translate(powerUp.x, powerUp.y);
                    // Reset game state
    config.gameState = 'playing';
    config.frameCount = 0;
    config.score = 0;
    
    // Reset power-ups
    config.activeShield = false;
    config.activeSlowMotion = false;
    config.activeMultiplier = false;
    config.activeMiniSize = false;
    config.slowMotionTimer = 0;
    config.multiplierTimer = 0;
    config.miniSizeTimer = 0;
    
    // Clear arrays
    pipes.length = 0;
    powerUps.length = 0;
    
    // Hide all screens
    hideAllScreens();
}

// Core gameplay functions
function birdJump() {
    // Different jump force based on environment and character
    let jumpForce = config.jumpForce;
    
    // Space environment has lower gravity effect on jumps
    if (config.environment === 'space') {
        jumpForce *= 0.8;
    }
    
    // Robot bird has heavier jumps
    if (config.character === 'robot') {
        jumpForce *= 1.2;
    }
    
    bird.velocityY = jumpForce;
}

function updateBird() {
    // Apply gravity
    let gravityValue = config.gravity;
    
    // Modify gravity based on environment
    if (config.environment === 'space') {
        gravityValue *= 0.7; // Lower gravity in space
    }
    
    // Modify falling speed based on character
    if (config.character === 'ninja') {
        gravityValue *= bird.ninjaFallingMultiplier;
    } else if (config.character === 'robot') {
        gravityValue *= 1.2; // Robot bird is heavier
    }
    
    // Apply slow motion if active
    if (config.activeSlowMotion) {
        gravityValue *= 0.5;
    }
    
    // Update vertical velocity
    bird.velocityY += gravityValue;
    
    // Update position
    bird.y += bird.velocityY;
    
    // Apply mini size power-up
    if (config.activeMiniSize) {
        bird.width = bird.originalWidth * 0.7;
        bird.height = bird.originalHeight * 0.7;
    } else {
        bird.width = bird.originalWidth;
        bird.height = bird.originalHeight;
    }
    
    // Animate bird
    if (config.frameCount % bird.animationSpeed === 0) {
        bird.frameX = (bird.frameX + 1) % bird.maxFrame;
    }
    
    // Check for collision with bounds
    if (bird.y + bird.height > config.height) {
        gameOver();
    } else if (bird.y < 0) {
        bird.y = 0;
        bird.velocityY = 0;
    }
}

function spawnPipe() {
    if (config.frameCount % config.pipeSpawnRate === 0) {
        // Calculate random gap position
        const gapPosition = Math.floor(Math.random() * (config.height - config.pipeGap - 100)) + 50;
        
        // Create top pipe
        const topPipe = {
            x: config.width,
            y: 0,
            width: config.pipeWidth,
            height: gapPosition,
            passed: false,
            moving: config.difficulty === 'extreme' // Moving pipes in extreme mode
        };
        
        // Create bottom pipe
        const bottomPipe =
Copy
Ask anything, create anything
Preview
Code
Thinking
Copy<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Flappy Adventure</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            overflow-x: hidden;
        }
        
        canvas {
            border: 2px solid #000;
            display: block;
            margin: 0 auto;
        }
        
        .game-container {
            position: relative;
            width: 400px;
            height: 600px;
            margin: 0 auto;
        }
        
        .hidden {
            display: none;
        }
        
        .character-option {
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .character-option:hover {
            transform: scale(1.1);
        }
        
        .character-option.selected {
            border: 3px solid #FFD700;
            transform: scale(1.1);
        }
        
        .environment-option {
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .environment-option:hover {
            transform: scale(1.1);
        }
        
        .environment-option.selected {
            border: 3px solid #FFD700;
        }
        
        .power-up-icon {
            width: 30px;
            height: 30px;
            margin: 0 5px;
        }
        
        .difficulty-btn {
            transition: all 0.3s;
        }
        
        .difficulty-btn.selected {
            background-color: #3182ce;
            color: white;
        }
        
        /* Make sure everything fits nicely for PDF export */
        @media print {
            body {
                width: 100%;
                margin: 0;
                padding: 0;
            }
            
            .page-break {
                page-break-before: avoid;
            }
            
            .game-container {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body class="bg-gray-100 p-4">
    <div class="max-w-4xl mx-auto bg-white shadow-lg rounded-lg overflow-hidden p-6">
        <h1 class="text-4xl font-bold text-center text-blue-600 mb-4">Super Flappy Adventure</h1>
        
        <!-- Game Description -->
        <div class="mb-6 text-center">
            <p class="text-lg">An enhanced version of the classic Flappy Bird with power-ups, multiple characters, environments, and difficulty levels!</p>
        </div>
        
        <!-- Game Screens -->
        <div class="game-container">
            <!-- Main Menu Screen -->
            <div id="main-menu" class="absolute inset-0 bg-gradient-to-b from-blue-400 to-blue-600 flex flex-col items-center justify-center p-4">
                <h2 class="text-4xl font-bold text-white mb-8">Super Flappy Adventure</h2>
                <button id="start-btn" class="mb-4 bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
                    Start Game
                </button>
                <button id="customize-btn" class="mb-4 bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
                    Customize
                </button>
                <button id="instructions-btn" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
                    Instructions
                </button>
            </div>
            
            <!-- Game Canvas (initially hidden) -->
            <canvas id="game-canvas" width="400" height="600" class="hidden"></canvas>
            
            <!-- Game Over Screen (initially hidden) -->
            <div id="game-over" class="hidden absolute inset-0 bg-black bg-opacity-80 flex flex-col items-center justify-center p-4">
                <h2 class="text-4xl font-bold text-white mb-4">Game Over</h2>
                <p id="final-score" class="text-2xl text-white mb-6">Score: 0</p>
                <p id="high-score" class="text-xl text-yellow-400 mb-8">High Score: 0</p>
                <button id="restart-btn" class="mb-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Play Again
                </button>
                <button id="menu-btn" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Main Menu
                </button>
            </div>
            
            <!-- Customization Screen (initially hidden) -->
            <div id="customize-screen" class="hidden absolute inset-0 bg-gradient-to-b from-purple-400 to-purple-600 flex flex-col items-center justify-start p-4 overflow-y-auto">
                <h2 class="text-3xl font-bold text-white mb-4">Customize Your Game</h2>
                
                <!-- Character Selection -->
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-white mb-2">Choose Your Character</h3>
                    <div class="flex space-x-4">
                        <div class="character-option selected bg-white p-2 rounded-lg" data-character="classic">
                            <div class="w-16 h-16 bg-yellow-400 rounded-full flex items-center justify-center">
                                <i class="fas fa-kiwi-bird text-2xl"></i>
                            </div>
                            <p class="text-center mt-1">Classic</p>
                        </div>
                        <div class="character-option bg-white p-2 rounded-lg" data-character="ninja">
                            <div class="w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center">
                                <i class="fas fa-kiwi-bird text-2xl text-white"></i>
                            </div>
                            <p class="text-center mt-1">Ninja</p>
                        </div>
                        <div class="character-option bg-white p-2 rounded-lg" data-character="robot">
                            <div class="w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center">
                                <i class="fas fa-robot text-2xl text-white"></i>
                            </div>
                            <p class="text-center mt-1">Robot</p>
                        </div>
                        <div class="character-option bg-white p-2 rounded-lg" data-character="ghost">
                            <div class="w-16 h-16 bg-purple-300 rounded-full flex items-center justify-center">
                                <i class="fas fa-ghost text-2xl text-white"></i>
                            </div>
                            <p class="text-center mt-1">Ghost</p>
                        </div>
                    </div>
                </div>
                
                <!-- Environment Selection -->
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-white mb-2">Choose Environment</h3>
                    <div class="flex space-x-4">
                        <div class="environment-option selected bg-white p-2 rounded-lg" data-environment="day">
                            <div class="w-16 h-16 bg-blue-400 rounded-lg flex items-center justify-center">
                                <i class="fas fa-sun text-2xl text-yellow-400"></i>
                            </div>
                            <p class="text-center mt-1">Day</p>
                        </div>
                        <div class="environment-option bg-white p-2 rounded-lg" data-environment="night">
                            <div class="w-16 h-16 bg-gray-900 rounded-lg flex items-center justify-center">
                                <i class="fas fa-moon text-2xl text-yellow-200"></i>
                            </div>
                            <p class="text-center mt-1">Night</p>
                        </div>
                        <div class="environment-option bg-white p-2 rounded-lg" data-environment="forest">
                            <div class="w-16 h-16 bg-green-700 rounded-lg flex items-center justify-center">
                                <i class="fas fa-tree text-2xl text-green-400"></i>
                            </div>
                            <p class="text-center mt-1">Forest</p>
                        </div>
                        <div class="environment-option bg-white p-2 rounded-lg" data-environment="space">
                            <div class="w-16 h-16 bg-black rounded-lg flex items-center justify-center">
                                <i class="fas fa-star text-2xl text-white"></i>
                            </div>
                            <p class="text-center mt-1">Space</p>
                        </div>
                    </div>
                </div>
                
                <!-- Difficulty Selection -->
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-white mb-2">Difficulty Level</h3>
                    <div class="flex space-x-2">
                        <button class="difficulty-btn selected px-4 py-2 bg-blue-100 rounded-lg" data-difficulty="easy">Easy</button>
                        <button class="difficulty-btn px-4 py-2 bg-blue-100 rounded-lg" data-difficulty="medium">Medium</button>
                        <button class="difficulty-btn px-4 py-2 bg-blue-100 rounded-lg" data-difficulty="hard">Hard</button>
                        <button class="difficulty-btn px-4 py-2 bg-blue-100 rounded-lg" data-difficulty="extreme">Extreme</button>
                    </div>
                </div>
                
                <button id="back-to-menu" class="mt-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Back to Menu
                </button>
            </div>
            
            <!-- Instructions Screen (initially hidden) -->
            <div id="instructions-screen" class="hidden absolute inset-0 bg-gradient-to-b from-indigo-400 to-indigo-600 flex flex-col items-center justify-start p-4 overflow-y-auto">
                <h2 class="text-3xl font-bold text-white mb-4">How to Play</h2>
                
                <div class="bg-white rounded-lg p-4 w-full mb-4">
                    <h3 class="text-xl font-semibold text-indigo-600 mb-2">Basic Controls</h3>
                    <p class="mb-2"><strong>Click, Touch or Spacebar:</strong> Make the bird fly upward</p>
                    <p class="mb-2"><strong>P key:</strong> Pause the game</p>
                </div>
                
                <div class="bg-white rounded-lg p-4 w-full mb-4">
                    <h3 class="text-xl font-semibold text-indigo-600 mb-2">Power-ups</h3>
                    <div class="flex items-center mb-2">
                        <div class="power-up-icon bg-blue-200 rounded-full flex items-center justify-center mr-2">
                            <i class="fas fa-shield-alt text-blue-600"></i>
                        </div>
                        <p><strong>Shield:</strong> Protects from one collision</p>
                    </div>
                    <div class="flex items-center mb-2">
                        <div class="power-up-icon bg-yellow-200 rounded-full flex items-center justify-center mr-2">
                            <i class="fas fa-bolt text-yellow-600"></i>
                        </div>
                        <p><strong>Slow Motion:</strong> Slows down game speed for 5 seconds</p>
                    </div>
                    <div class="flex items-center">
                        <div class="power-up-icon bg-green-200 rounded-full flex items-center justify-center mr-2">
                            <i class="fas fa-times text-green-600"></i>
                        </div>
                        <p><strong>Multiplier:</strong> Doubles your points for 10 seconds</p>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg p-4 w-full mb-4">
                    <h3 class="text-xl font-semibold text-indigo-600 mb-2">Special Characters</h3>
                    <p class="mb-1"><strong>Classic Bird:</strong> Balanced character</p>
                    <p class="mb-1"><strong>Ninja Bird:</strong> Smaller hitbox but faster falling</p>
                    <p class="mb-1"><strong>Robot Bird:</strong> Heavier but can break through one pipe</p>
                    <p><strong>Ghost Bird:</strong> Can occasionally phase through pipes</p>
                </div>
                
                <button id="back-from-instructions" class="mt-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Back to Menu
                </button>
            </div>
            
            <!-- Pause Screen (initially hidden) -->
            <div id="pause-screen" class="hidden absolute inset-0 bg-black bg-opacity-50 flex flex-col items-center justify-center p-4">
                <h2 class="text-4xl font-bold text-white mb-8">Game Paused</h2>
                <button id="resume-btn" class="mb-4 bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Resume
                </button>
                <button id="quit-btn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300">
                    Quit
                </button>
            </div>
        </div>
        
        <!-- Game Features -->
        <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-blue-100 p-4 rounded-lg">
                <h3 class="text-xl font-bold text-blue-800 mb-2">Multiple Characters</h3>
                <p>Choose from four unique birds, each with special abilities and characteristics!</p>
                <ul class="list-disc ml-5 mt-2">
                    <li>Classic Bird - Balanced character</li>
                    <li>Ninja Bird - Smaller hitbox but faster falling</li>
                    <li>Robot Bird - Heavier but can break through one pipe</li>
                    <li>Ghost Bird - Can occasionally phase through pipes</li>
                </ul>
            </div>
            
            <div class="bg-green-100 p-4 rounded-lg">
                <h3 class="text-xl font-bold text-green-800 mb-2">Power-ups System</h3>
                <p>Collect special items to gain advantages:</p>
                <ul class="list-disc ml-5 mt-2">
                    <li>Shield - Protects from one collision</li>
                    <li>Slow Motion - Slows down game speed</li>
                    <li>Score Multiplier - Doubles your points</li>
                    <li>Mini Bird - Shrinks your character temporarily</li>
                </ul>
            </div>
            
            <div class="bg-purple-100 p-4 rounded-lg">
                <h3 class="text-xl font-bold text-purple-800 mb-2">Multiple Environments</h3>
                <p>Play through different worlds with unique visuals and challenges:</p>
                <ul class="list-disc ml-5 mt-2">
                    <li>Day - Classic sunny environment</li>
                    <li>Night - Darker setting with glowing obstacles</li>
                    <li>Forest - Navigate through tree branches instead of pipes</li>
                    <li>Space - Low gravity environment with asteroid obstacles</li>
                </ul>
            </div>
            
            <div class="bg-yellow-100 p-4 rounded-lg">
                <h3 class="text-xl font-bold text-yellow-800 mb-2">Difficulty Levels</h3>
                <p>Challenge yourself with progressively harder gameplay:</p>
                <ul class="list-disc ml-5 mt-2">
                    <li>Easy - Wider gaps, slower speed</li>
                    <li>Medium - Standard gameplay</li>
                    <li>Hard - Faster speed, narrower gaps</li>
                    <li>Extreme - Maximum speed with moving obstacles</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Game Variables
        let canvas, ctx;
        let gameState = 'menu'; // menu, playing, paused, gameOver
        let score = 0;
        let highScore = 0;
        let gameSpeed = 2;
        let gravity = 0.5;
        let jumping = false;
        
        // Character settings
        let selectedCharacter = 'classic';
        let selectedEnvironment = 'day';
        let selectedDifficulty = 'easy';
        
        // Bird object
        const bird = {
            x: 50,
            y: 300,
            width: 40,
            height: 30,
            velocity: 0,
            jumpStrength: -10,
            
            // Character-specific properties
            characterProps: {
                classic: { width: 40, height: 30, color: '#FFD700', gravity: 0.5, jumpStrength: -10 },
                ninja: { width: 35, height: 25, color: '#333333', gravity: 0.6, jumpStrength: -10.5 },
                robot: { width: 45, height: 35, color: '#3498db', gravity: 0.7, jumpStrength: -11 },
                ghost: { width: 40, height: 30, color: '#9b59b6', gravity: 0.4, jumpStrength: -9.5 }
            },
            
            // Method to update bird properties based on selected character
            updateCharacter: function() {
                const props = this.characterProps[selectedCharacter];
                this.width = props.width;
                this.height = props.height;
                this.color = props.color;
                gravity = props.gravity;
                this.jumpStrength = props.jumpStrength;
                
                // Adjust difficulty
                switch(selectedDifficulty) {
                    case 'easy':
                        gameSpeed = 2;
                        gravity *= 0.9;
                        break;
                    case 'medium':
                        gameSpeed = 3;
                        // Default gravity
                        break;
                    case 'hard':
                        gameSpeed = 4;
                        gravity *= 1.1;
                        break;
                    case 'extreme':
                        gameSpeed = 5;
                        gravity *= 1.2;
                        break;
                }
            },
            
            // Draw the bird
            draw: function() {
                ctx.fillStyle = this.color;
                
                // Basic bird shape
                ctx.beginPath();
                ctx.ellipse(this.x, this.y, this.width/2, this.height/2, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // Add eye
                ctx.fillStyle = '#fff';
                ctx.beginPath();
                ctx.ellipse(this.x + this.width/4, this.y - this.height/6, this.width/8, this.height/8, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // Add pupil
                ctx.fillStyle = '#000';
                ctx.beginPath();
                ctx.ellipse(this.x + this.width/4, this.y - this.height/6, this.width/16, this.height/16, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // Add beak
                ctx.fillStyle = '#FF6B00';
                ctx.beginPath();
                ctx.moveTo(this.x + this.width/2, this.y);
                ctx.lineTo(this.x + this.width/2 + 15, this.y - 5);
                ctx.lineTo(this.x + this.width/2 + 15, this.y + 5);
                ctx.closePath();
                ctx.fill();
                
                // Character-specific details
                switch(selectedCharacter) {
                    case 'ninja':
                        // Ninja headband
                        ctx.fillStyle = '#c0392b';
                        ctx.fillRect(this.x - this.width/2, this.y - this.height/3, this.width, this.height/6);
                        break;
                    case 'robot':
                        // Robot antenna
                        ctx.fillStyle = '#7f8c8d';
                        ctx.fillRect(this.x, this.y - this.height/2 - 10, 2, 10);
                        ctx.beginPath();
                        ctx.arc(this.x + 1, this.y - this.height/2 - 10, 3, 0, Math.PI * 2);
                        ctx.fill();
                        break;
                    case 'ghost':
                        // Ghost transparency
                        ctx.globalAlpha = 0.7;
                        // Reset alpha
                        ctx.globalAlpha = 1;
                        break;
                }
            },
            
            // Update bird position
            update: function() {
                this.velocity += gravity;
                this.y += this.velocity;
                
                // Ground collision
                if (this.y + this.height/2 > canvas.height) {
                    this.y = canvas.height - this.height/2;
                    this.velocity = 0;
                    gameOver();
                }
                
                // Ceiling collision
                if (this.y - this.height/2 < 0) {
                    this.y = this.height/2;
                    this.velocity = 1;
                }
            },
            
            // Make the bird jump
            jump: function() {
                this.velocity = this.jumpStrength;
                jumping = true;
                setTimeout(() => { jumping = false; }, 200);
            },
            
            // Reset bird position
            reset: function() {
                this.x = 50;
                this.y = 300;
                this.velocity = 0;
            }
        };
        
        // Pipes array
        let pipes = [];
        const pipeWidth = 60;
        let pipeGap = 150; // Gap between top and bottom pipes
        let pipeSpacing = 220; // Distance between pipe pairs
        let timeSinceLastPipe = 0;
        
        // Power-ups
        let powerUps = [];
        let activePowerUps = {
            shield: false,
            slowMotion: false,
            multiplier: false,
            mini: false
        };
        let powerUpTimers = {
            shield: 0,
            slowMotion: 0,
            multiplier: 0,
            mini: 0
        };
        
        // Environment settings
        const environments = {
            day: { 
                bgColor: '#87CEEB', 
                pipeColor: '#2ecc71', 
                groundColor: '#8B4513',
                effects: {}
            },
            night: { 
                bgColor: '#191970', 
                pipeColor: '#27ae60', 
                groundColor: '#6B4226',
                effects: { glowingObstacles: true }
            },
            forest: { 
                bgColor: '#3A5F0B', 
                pipeColor: '#795548', 
                groundColor: '#4B371C',
                effects: { treeBranches: true }
            },
            space: { 
                bgColor: '#000033', 
                pipeColor: '#95a5a6', 
                groundColor: '#34495e',
                effects: { lowGravity: true, asteroids: true }
            }
        };
        
        // Initialize game
        function init() {
            canvas = document.getElementById('game-canvas');
            ctx = canvas.getContext('2d');
            
            // Set up event listeners
            document.addEventListener('keydown', function(e) {
                if (e.code === 'Space' || e.code === 'ArrowUp') {
                    handleInput();
                }
                
                if (e.code === 'KeyP') {
                    togglePause();
                }
            });
            
            canvas.addEventListener('click', handleInput);
            canvas.addEventListener('touchstart', handleInput);
            
            // Set up menu buttons
            document.getElementById('start-btn').addEventListener('click', startGame);
            document.getElementById('customize-btn').addEventListener('click', showCustomizeScreen);
            document.getElementById('instructions-btn').addEventListener('click', showInstructionsScreen);
            document.getElementById('restart-btn').addEventListener('click', startGame);
            document.getElementById('menu-btn').addEventListener('click', showMainMenu);
            document.getElementById('back-to-menu').addEventListener('click', showMainMenu);
            document.getElementById('back-from-instructions').addEventListener('click', showMainMenu);
            document.getElementById('resume-btn').addEventListener('click', resumeGame);
            document.getElementById('quit-btn').addEventListener('click', showMainMenu);
            
            // Set up character selection
            const characterOptions = document.querySelectorAll('.character-option');
            characterOptions.forEach(option => {
                option.addEventListener('click', function() {
                    characterOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedCharacter = this.getAttribute('data-character');
                });
            });
            
            // Set up environment selection
            const environmentOptions = document.querySelectorAll('.environment-option');
            environmentOptions.forEach(option => {
                option.addEventListener('click', function() {
                    environmentOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedEnvironment = this.getAttribute('data-environment');
                });
            });
            
            // Set up difficulty selection
            const difficultyButtons = document.querySelectorAll('.difficulty-btn');
            difficultyButtons.forEach(button => {
                button.addEventListener('click', function() {
                    difficultyButtons.forEach(btn => btn.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedDifficulty = this.getAttribute('data-difficulty');
                    
                    // Update pipe gap based on difficulty
                    switch(selectedDifficulty) {
                        case 'easy':
                            pipeGap = 180;
                            break;
                        case 'medium':
                            pipeGap = 150;
                            break;
                        case 'hard':
                            pipeGap = 130;
                            break;
                        case 'extreme':
                            pipeGap = 120;
                            break;
                    }
                });
            });
            
            // Try to load high score from localStorage
            if (localStorage.getItem('flappyHighScore')) {
                highScore = parseInt(localStorage.getItem('flappyHighScore'));
            }
        }
        
        // Handle input (jump)
        function handleInput(e) {
            if (e) e.preventDefault();
            
            if (gameState === 'playing' && !jumping) {
                bird.jump();
            }
        }
        
        // Start game
        function startGame() {
            // Hide all screens and show canvas
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('game-over').classList.add('hidden');
            document.getElementById('customize-screen').classList.add('hidden');
            document.getElementById('instructions-screen').classList.add('hidden');
            document.getElementById('pause-screen').classList.add('hidden');
            document.getElementById('game-canvas').classList.remove('hidden');
            
            // Reset game state
            gameState = 'playing';
            score = 0;
            pipes = [];
            powerUps = [];
            activePowerUps = {
                shield: false,
                slowMotion: false,
                multiplier: false,
                mini: false
            };
            bird.reset();
            bird.updateCharacter();
            
            // Start game loop
            gameLoop();
        }
        
        // Toggle pause state
        function togglePause() {
            if (gameState === 'playing') {
                gameState = 'paused';
                document.getElementById('pause-screen').classList.remove('hidden');
            } else if (gameState === 'paused') {
                resumeGame();
            }
        }
        
        // Resume game from pause
        function resumeGame() {
            gameState = 'playing';
            document.getElementById('pause-screen').classList.add('hidden');
            gameLoop();
        }
        
        // Show main menu
        function showMainMenu() {
            gameState = 'menu';
            document.getElementById('main-menu').classList.remove('hidden');
            document.getElementById('game-over').classList.add('hidden');
            document.getElementById('customize-screen').classList.add('hidden');
            document.getElementById('instructions-screen').classList.add('hidden');
            document.getElementById('pause-screen').classList.add('hidden');
            document.getElementById('game-canvas').classList.add('hidden');
        }
        
        // Show customize screen
        function showCustomizeScreen() {
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('customize-screen').classList.remove('hidden');
        }
        
        // Show instructions screen
        function showInstructionsScreen() {
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('instructions-screen').classList.remove('hidden');
        }
        
        // Game over
        function gameOver() {
            gameState = 'gameOver';
            document.getElementById('final-score').textContent = `Score: ${score}`;
            
            // Update high score if needed
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('flappyHighScore', highScore);
            }
            
            document.getElementById('high-score').textContent = `High Score: ${highScore}`;
            document.getElementById('game-over').classList.remove('hidden');
        }
        
        // Create a pipe pair
        function createPipe() {
            const minHeight = 50;
            const maxHeight = canvas.height - pipeGap - minHeight;
            const height = Math.floor(Math.random() * (maxHeight - minHeight + 1)) + minHeight;
            
            // Create top pipe
            pipes.push({
                x: canvas.width,
                y: 0,
                width: pipeWidth,
                height: height,
                passed: false
            });
            
            // Create bottom pipe
            pipes.push({
                x: canvas.width,
                y: height + pipeGap,
                width: pipeWidth,
                height: canvas.height - height - pipeGap,
                passed: false
            });
            
            // Randomly create power-up
            if (Math.random() < 0.3) { // 30% chance
                createPowerUp(canvas.width + pipeWidth/2, height + pipeGap/2);
            }
        }
        
        // Create a power-up
        function createPowerUp(x, y) {
            const types = ['shield', 'slowMotion', 'multiplier', 'mini'];
            const type = types[Math.floor(Math.random() * types.length)];
            
            powerUps.push({
                x: x,
                y: y,
                type: type,
                width: 30,
                height: 30,
                collected: false
            });
        }
        
        // Draw game elements
        function draw() {
            const env = environments[selectedEnvironment];
            
            // Draw background
            ctx.fillStyle = env.bgColor;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw stars in space environment
            if (selectedEnvironment === 'space') {
                ctx.fillStyle = 'white';
                for (let i = 0; i < 50; i++) {
                    const size = Math.random() * 3;
                    ctx.beginPath();
                    ctx.arc(
                        Math.random() * canvas.width,
                        Math.random() * canvas.height,
                        size,
                        0,
                        Math.PI * 2
                    );
                    ctx.fill();
                }
            }
            
            // Draw pipes
            pipes.forEach(pipe => {
                ctx.fillStyle = env.pipeColor;
                
                if (env.effects.glowingObstacles) {
                    ctx.shadowBlur = 10;
                    ctx.shadowColor = "#3498db";
                }
                
                if (env.effects.treeBranches) {
                    // Draw branch texture
                    ctx.fillRect(pipe.x, pipe.y, pipe.width, pipe.height);
                    
                    // Add some texture to branches
                    ctx.fillStyle = '#5D4037';
                    for (let i = 0; i < 5; i++) {
                        ctx.fillRect(
                            pipe.x + Math.random() * pipe.width,
                            pipe.y + Math.random() * pipe.height,
                            5,
                            3
                        );
                    }
                } else if (env.effects.asteroids && pipe.height < canvas.height/2) {
                    // Draw asteroids instead of pipes
                    ctx.beginPath();
                    ctx.ellipse(
                        pipe.x + pipe.width/2,
                        pipe.y + pipe.height/2,
                        pipe.width/2,
                        pipe.height/2,
                        0,
                        0,
                        Math.PI * 2
                    );
                    ctx.fill();
                    
                    // Add crater details
                    ctx.fillStyle = '#7f8c8d';
                    ctx.beginPath();
                    ctx.arc(
                        pipe.x + pipe.width/2 + 10,
                        pipe.y + pipe.height/2 - 10,
                        5,
                        0,
                        Math.PI * 2
                    );
                    ctx.fill();
                } else {
                    // Standard pipe
                    ctx.fillRect(pipe.x, pipe.y, pipe.width, pipe.height);
                    
                    // Pipe cap
                    ctx.fillStyle = '#27ae60';
                    const capWidth = 10;
                    if (pipe.y === 0) {
                        ctx.fillRect(pipe.x - capWidth/2, pipe.height - 20, pipe.width + capWidth, 20);
                    } else {
                        ctx.fillRect(pipe.x - capWidth/2, pipe.y, pipe.width + capWidth, 20);
                    }
                }
                
                // Reset shadow
                ctx.shadowBlur = 0;
            });
            
            // Draw power-ups
            powerUps.forEach(powerUp => {
                if (!powerUp.collected) {
                    ctx.save();
                    ctx.translate(powerUp.x, powerUp.y);
                    ctx.rotate(Date.now() / 1000);
                    
                    // Draw power-up background
                    switch(powerUp.type) {
                        case 'shield':
                            ctx.fillStyle = '#3498db';
                            break;
                        case 'slowMotion':
                            ctx.fillStyle = '#f1c40f';
                            break;
                        case 'multiplier':
                            ctx.fillStyle = '#2ecc71';
                            break;
                        case 'mini':
                            ctx.fillStyle = '#e74c3c';
                            break;
                    }
                    
                    ctx.beginPath();
                    ctx.arc(0, 0, 15, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Draw power-up icon
                    ctx.fillStyle = 'white';
                    switch(powerUp.type) {
                        case 'shield':
                            // Shield icon
                            ctx.beginPath();
                            ctx.moveTo(0, -8);
                            ctx.lineTo(7, -3);
                            ctx.lineTo(7, 5);
                            ctx.lineTo(0, 10);
                            ctx.lineTo(-7, 5);
                            ctx.lineTo(-7, -3);
                            ctx.closePath();
                            ctx.fill();
                            break;
                        case 'slowMotion':
                            // Clock icon
                            ctx.beginPath();
                            ctx.arc(0, 0, 8, 0, Math.PI * 2);
                            ctx.fill();
                            ctx.fillStyle = '#3498db';
                            ctx.fillRect(-1, 0, 2, -6);
                            ctx.fillRect(0, 0, 5, 1);
                            break;
                        case 'multiplier':
                            // Multiply icon
                            ctx.font = "bold 16px Arial";
                            ctx.fillText("x2", -7, 5);
                            break;
                        case 'mini':
                            // Mini icon
                            ctx.beginPath();
                            ctx.arc(0, 0, 8, 0, Math.PI * 2);
                            ctx.fill();
                            ctx.fillStyle = '#e74c3c';
                            ctx.font = "bold 12px Arial";
                            ctx.fillText("S", -4, 4);
                            break;
                    }
                    
                    ctx.restore();
                }
            });
            
            // Draw bird
            if (activePowerUps.mini) {
                ctx.save();
                ctx.scale(0.6, 0.6);
                bird.draw();
                ctx.restore();
            } else {
                bird.draw();
            }
            
            // Draw shield if active
            if (activePowerUps.shield) {
                ctx.strokeStyle = '#3498db';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.arc(bird.x, bird.y, bird.width * 0.75, 0, Math.PI * 2);
                ctx.stroke();
                
                // Add glow effect
                ctx.shadowBlur = 10;
                ctx.shadowColor = "#3498db";
                ctx.stroke();
                ctx.shadowBlur = 0;
            }
            
            // Draw ground
            ctx.fillStyle = env.groundColor;
            ctx.fillRect(0, canvas.height - 20, canvas.width, 20);
            
            // Draw score
            ctx.fillStyle = 'white';
            ctx.font = 'bold 32px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(score, canvas.width / 2, 50);
            
            // Draw active power-up indicators
            let indicatorX = 20;
            const indicatorY = 30;
            
            if (activePowerUps.shield) {
                ctx.fillStyle = '#3498db';
                ctx.beginPath();
                ctx.arc(indicatorX, indicatorY, 10, 0, Math.PI * 2);
                ctx.fill();
                indicatorX += 30;
            }
            
            if (activePowerUps.slowMotion) {
                ctx.fillStyle = '#f1c40f';
                ctx.beginPath();
                ctx.arc(indicatorX, indicatorY, 10, 0, Math.PI * 2);
                ctx.fill();
                indicatorX += 30;
            }
            
            if (activePowerUps.multiplier) {
                ctx.fillStyle = '#2ecc71';
                ctx.beginPath();
                ctx.arc(indicatorX, indicatorY, 10, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = 'white';
                ctx.font = 'bold 12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('x2', indicatorX, indicatorY + 4);
                indicatorX += 30;
            }
            
            if (activePowerUps.mini) {
                ctx.fillStyle = '#e74c3c';
                ctx.beginPath();
                ctx.arc(indicatorX, indicatorY, 10, 0, Math.PI * 2);
                ctx.fill();
                indicatorX += 30;
            }
        }
        
        // Update game elements
        function update() {
            if (gameState !== 'playing') return;
            
            // Update bird
            bird.update();
            
            // Create new pipes when needed
            timeSinceLastPipe += 1;
            if (timeSinceLastPipe >= pipeSpacing / gameSpeed) {
                createPipe();
                timeSinceLastPipe = 0;
            }
            
            // Move pipes
            let actualSpeed = gameSpeed;
            if (activePowerUps.slowMotion) {
                actualSpeed = gameSpeed * 0.5;
            }
            
            pipes = pipes.filter(pipe => {
                pipe.x -= actualSpeed;
                
                // Check if bird passed pipe
                if (!pipe.passed && pipe.x + pipe.width < bird.x) {
                    pipe.passed = true;
                    if (pipe.y === 0) { // Only count top pipes to avoid double counting
                        let points = 1;
                        if (activePowerUps.multiplier) {
                            points = 2;
                        }
                        score += points;
                    }
                }
                
                // Remove pipes that are off screen
                return pipe.x + pipe.width > 0;
            });
            
            // Update power-ups
            powerUps = powerUps.filter(powerUp => {
                if (!powerUp.collected) {
                    powerUp.x -= actualSpeed;
                    
                    // Check collision with bird
                    const birdHitbox = {
                        x: bird.x - bird.width/2,
                        y: bird.y - bird.height/2,
                        width: bird.width,
                        height: bird.height
                    };
            
            // Adjust hitbox for mini power-up
            if (activePowerUps.mini) {
                birdHitbox.x = bird.x - bird.width * 0.3;
                birdHitbox.y = bird.y - bird.height * 0.3;
                birdHitbox.width = bird.width * 0.6;
                birdHitbox.height = bird.height * 0.6;
            }
            
            // Check each pipe for collision
            pipes.forEach(pipe => {
                if (
                    birdHitbox.x < pipe.x + pipe.width &&
                    birdHitbox.x + birdHitbox.width > pipe.x &&
                    birdHitbox.y < pipe.y + pipe.height &&
                    birdHitbox.y + birdHitbox.height > pipe.y
                ) {
                    collision = true;
                }
            });
            
            // If collision detected
            if (collision) {
                // Check if shield is active
                if (activePowerUps.shield) {
                    activePowerUps.shield = false;
                    collision = false;
                } 
                // Check if robot bird can break through
                else if (selectedCharacter === 'robot' && !bird.usedAbility) {
                    bird.usedAbility = true;
                    collision = false;
                } else {
                    gameOver();
                }
            }
            
            return collision;
        }
        
        // Activate a power-up
        function activatePowerUp(type) {
            activePowerUps[type] = true;
            
            switch(type) {
                case 'shield':
                    powerUpTimers.shield = 1; // Lasts until hit
                    break;
                case 'slowMotion':
                    powerUpTimers.slowMotion = 60 * 5; // 5 seconds at 60 FPS
                    break;
                case 'multiplier':
                    powerUpTimers.multiplier = 60 * 10; // 10 seconds
                    break;
                case 'mini':
                    powerUpTimers.mini = 60 * 7; // 7 seconds
                    break;
            }
        }
        
        // Game loop
        function gameLoop() {
            if (gameState === 'playing') {
                update();
                draw();
                requestAnimationFrame(gameLoop);
            }
        }
        
        // Initialize the game when page loads
        window.addEventListener('load', init);
    </script>
</body>
</html>             
